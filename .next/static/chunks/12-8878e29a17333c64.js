"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[12],{6116:function(e,t,r){r.d(t,{U:function(){return d}});var a=r(7437),n=r(7648),i=r(8997),s=r(3774),o=r(1047),c=r(6858),l=r(8135);function d(e){var t,r,d,u,h,g,m;let{vehicle:p,onSave:f,isSaved:v}=e,x=(null===(u=(t=p).apiData)||void 0===u?void 0:null===(d=u.listing)||void 0===d?void 0:null===(r=d.retailListing)||void 0===r?void 0:r.primaryImage)||(null===(m=t.apiData)||void 0===m?void 0:null===(g=m.listing)||void 0===g?void 0:null===(h=g.wholesaleListing)||void 0===h?void 0:h.primaryImage)||(t.images&&t.images.length>0?t.images[0]:"https://images.pexels.com/photos/170811/pexels-photo-170811.jpeg?auto=compress&cs=tinysrgb&w=800");return(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden hover:shadow-lg transition-all duration-300 group",children:[(0,a.jsxs)("div",{className:"relative aspect-[16/10] overflow-hidden bg-gray-100",children:[(0,a.jsx)("img",{src:x,alt:"".concat(p.year," ").concat(p.make," ").concat(p.model),className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500",onError:e=>{e.currentTarget.src="https://images.pexels.com/photos/170811/pexels-photo-170811.jpeg?auto=compress&cs=tinysrgb&w=800"}}),(0,a.jsx)("div",{className:"absolute top-3 left-3",children:(0,a.jsx)("span",{className:"bg-emerald-600 text-white text-xs font-semibold px-2 py-1 rounded",children:p.vehicleType})}),f&&(0,a.jsx)("button",{onClick:e=>{e.preventDefault(),f(p.id)},className:"absolute top-3 right-3 p-2 rounded-full transition-colors ".concat(v?"bg-red-500 text-white":"bg-white/90 text-gray-600 hover:bg-red-500 hover:text-white"),children:(0,a.jsx)(i.Z,{className:"w-5 h-5 ".concat(v?"fill-current":"")})})]}),(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 text-start",children:[p.year," ",p.make," ",p.model]}),(0,a.jsxs)("div",{className:"flex items-center gap-1 text-sm text-gray-500 mt-1",children:[(0,a.jsx)(s.Z,{className:"w-4 h-4"}),(0,a.jsxs)("span",{children:[p.dealerCity,", ",p.dealerState]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-600 mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(o.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:p.year})]}),(0,a.jsx)("span",{className:"text-gray-400",children:"|"}),(0,a.jsx)("span",{children:p.transmission})]}),(0,a.jsxs)("div",{className:"border-t border-gray-100 pt-4",children:[(0,a.jsx)("div",{className:"flex justify-between items-start mb-3",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"US Price"}),(0,a.jsx)("p",{className:"text-lg font-bold text-gray-900",children:(0,l.xG)(p.priceUsd)})]})}),(0,a.jsxs)(n.default,{href:"/marketplace/".concat(p.id),className:"flex items-center justify-center gap-2 w-full bg-gray-900 text-white py-2.5 rounded-lg font-medium hover:bg-emerald-600 transition-colors",children:["View Details",(0,a.jsx)(c.Z,{className:"w-4 h-4"})]})]})]})]})}},6540:function(e,t,r){r.d(t,{PT:function(){return d},$v:function(){return l},DG:function(){return u}});var a=r(1713),n=r(6305);let i=e=>{if(!e)return"";let t=new URLSearchParams;Object.entries(e).forEach(e=>{let[r,a]=e;null!=a&&""!==a&&t.append(r,String(a))});let r=t.toString();return r?"?".concat(r):""},s=e=>({vehicles:e.data.data,meta:e.data.meta}),o={getAll:async e=>{try{let t=i(e),r=await n.x.get("/vehicles".concat(t));return s(r.data)}catch(e){throw console.error("Error fetching vehicles:",e),Error("Failed to fetch vehicles")}},getById:async e=>{try{return(await n.x.get("/vehicles/".concat(e))).data.data}catch(t){throw console.error("Error fetching vehicle ".concat(e,":"),t),Error("Failed to fetch vehicle with ID: ".concat(e))}},saveVehicle:async e=>{try{return(await n.x.post("/vehicles/save-from-api",e)).data.data}catch(e){throw console.error("Error saving vehicle:",e),Error("Failed to save vehicle")}},search:async(e,t)=>o.getAll({...t,search:e})};var c=r(2265);function l(e){var t,r,n;let i=(0,a.a)({queryKey:["vehicles",e],queryFn:async()=>await o.getAll(e),staleTime:3e5,refetchOnWindowFocus:!1});return{vehicles:null!==(n=null===(t=i.data)||void 0===t?void 0:t.vehicles)&&void 0!==n?n:[],meta:null===(r=i.data)||void 0===r?void 0:r.meta,isLoading:i.isLoading,isError:i.isError,error:i.error,refetch:i.refetch,isFetching:i.isFetching}}function d(e){let t=(0,a.a)({queryKey:["vehicle",e],queryFn:async()=>(await o.getById(e)).data,enabled:!!e,staleTime:6e5});return{vehicle:t.data,isLoading:t.isLoading,isError:t.isError,error:t.error,refetch:t.refetch}}function u(e){let[t,r]=(0,c.useState)(1),a=(0,c.useMemo)(()=>Math.ceil(30*t/100),[t]),{vehicles:n,meta:i,isLoading:s,isError:o,error:d,refetch:u}=l({...e,page:a,limit:100}),{paginatedVehicles:h,enhancedMeta:g}=(0,c.useMemo)(()=>{if(!n.length||!i)return{paginatedVehicles:[],enhancedMeta:null};let e=i.total||i.fromApi||0,r=(t-1)*30,s=30*t,o=(a-1)*100,c=Math.min(s-o,n.length);return{paginatedVehicles:n.slice(r-o,c),enhancedMeta:{...i,frontendPage:t,frontendPages:Math.ceil(e/30),frontendPageSize:30,apiPage:a,apiPages:i.pages,displayStart:r+1,displayEnd:Math.min(s,e)}}},[n,i,t,a]),m=e=>{g&&e>=1&&e<=g.frontendPages&&(r(e),window.scrollTo({top:0,behavior:"smooth"}))};return{vehicles:h,allVehicles:n,meta:g,isLoading:s,isError:o,error:d,refetch:u,currentPage:t,totalPages:(null==g?void 0:g.frontendPages)||0,goToPage:m,nextPage:()=>{g&&t<g.frontendPages&&m(t+1)},prevPage:()=>{t>1&&m(t-1)},hasNextPage:!!g&&t<g.frontendPages,hasPrevPage:t>1,resetPagination:()=>r(1)}}},6305:function(e,t,r){r.d(t,{x:function(){return s}});var a=r(3464),n=r(605),i=r(257);let s=a.Z.create({baseURL:i.env.NEXT_PUBLIC_API_URL||"https://afrozonauto-backend.onrender.com/api",headers:{"Content-Type":"application/json"}});s.interceptors.request.use(async e=>{let t=await (0,n.getSession)(),r=null==t?void 0:t.accessToken;return r&&(e.headers.Authorization="Bearer ".concat(r)),e},e=>Promise.reject(e)),s.interceptors.response.use(e=>e,e=>{var t;return(null===(t=e.response)||void 0===t?void 0:t.status)===401&&(window.location.href="/login"),Promise.reject(e)})},8135:function(e,t,r){r.d(t,{LI:function(){return l},X:function(){return o},p6:function(){return c},qA:function(){return i},xG:function(){return s},yG:function(){return d}});let a={sourcing_fee_percent:5,sourcing_fee_min_usd:500,inspection_fee_usd:150,us_handling_fee_usd:350,shipping_roro_base_usd:1800,shipping_container_base_usd:2500,exchange_rate_ngn_usd:1550,timeline_days_roro:45,timeline_days_container:60},n={CAR:1,SEDAN:1,COUPE:1,HATCHBACK:1,WAGON:1.05,CONVERTIBLE:1.05,SUV:1.15,TRUCK:1.25,VAN:1.2,MOTORCYCLE:0};function i(e,t,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:a,s=n[t]||1,o=Math.max(i.sourcing_fee_percent/100*e,i.sourcing_fee_min_usd),c=i.inspection_fee_usd,l=i.us_handling_fee_usd,d=("RORO"===r?i.shipping_roro_base_usd:i.shipping_container_base_usd)*s,u=e+o+c+l+d,h=u*i.exchange_rate_ngn_usd;return{breakdown:{vehicle_price:e,sourcing_fee:o,inspection_fee:c,us_handling_fee:l,shipping_cost:d,total_usd:u,total_ngn:h,exchange_rate:i.exchange_rate_ngn_usd},estimatedDeliveryDays:"RORO"===r?i.timeline_days_roro:i.timeline_days_container,depositAmount:.3*u}}function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"USD";return"NGN"===t?new Intl.NumberFormat("en-NG",{style:"currency",currency:"NGN",minimumFractionDigits:0,maximumFractionDigits:0}).format(e):new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(e)}function o(e){let t=new Date;return t.setDate(t.getDate()+e),t}function c(e){return("string"==typeof e?new Date(e):e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}let l=["Lagos","Abuja","Port Harcourt","Kano","Ibadan","Enugu","Kaduna","Benin City","Warri","Calabar","Aba","Jos","Ilorin","Onitsha","Abeokuta","Uyo","Owerri","Akure","Bauchi","Sokoto"],d=["Toyota","Honda","Ford","Chevrolet","BMW","Mercedes-Benz","Lexus","Nissan","Hyundai","Kia","Mazda","Volkswagen","Audi","Subaru","Jeep","Dodge","Ram","GMC","Acura","Infiniti","Cadillac","Lincoln","Volvo","Land Rover","Porsche"]}}]);