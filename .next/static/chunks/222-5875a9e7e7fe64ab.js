"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[222],{9763:function(e,t,r){r.d(t,{Z:function(){return i}});var a=r(2265),l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let s=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),i=(e,t)=>{let r=(0,a.forwardRef)((r,i)=>{let{color:n="currentColor",size:o=24,strokeWidth:c=2,absoluteStrokeWidth:d,className:u="",children:m,...g}=r;return(0,a.createElement)("svg",{ref:i,...l,width:o,height:o,stroke:n,strokeWidth:d?24*Number(c)/Number(o):c,className:["lucide","lucide-".concat(s(e)),u].join(" "),...g},[...t.map(e=>{let[t,r]=e;return(0,a.createElement)(t,r)}),...Array.isArray(m)?m:[m]])});return r.displayName="".concat(e),r}},2660:function(e,t,r){r.d(t,{Z:function(){return a}});let a=(0,r(9763).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},9397:function(e,t,r){r.d(t,{Z:function(){return a}});let a=(0,r(9763).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},4743:function(e,t,r){r.d(t,{Z:function(){return a}});let a=(0,r(9763).Z)("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]])},2489:function(e,t,r){r.d(t,{Z:function(){return a}});let a=(0,r(9763).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},7975:function(e,t,r){r.d(t,{i:function(){return n}});var a=r(7437),l=r(9376),s=r(4191),i=r(2265);function n(e){let{children:t,redirectTo:r="/login"}=e,n=(0,l.useRouter)(),{isAuthenticated:o,accessToken:c}=(0,s.tN)(),[d,u]=(0,i.useState)(s.tN.persist.hasHydrated());return((0,i.useEffect)(()=>s.tN.persist.onFinishHydration(()=>{u(!0)}),[]),(0,i.useEffect)(()=>{!d||o&&c||n.replace(r)},[d,o,c,n,r]),d&&o&&c)?(0,a.jsx)(a.Fragment,{children:t}):(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsx)("div",{className:"w-10 h-10 border-4 border-emerald-600 border-t-transparent rounded-full animate-spin"})})}},862:function(e,t,r){r.d(t,{CX:function(){return h},Iy:function(){return g},ZP:function(){return c},dW:function(){return x},eV:function(){return o},hr:function(){return d},p3:function(){return p},r_:function(){return u},vP:function(){return m}});var a=r(1713),l=r(9827),s=r(1770),i=r(4191);async function n(e,t){let r=await fetch(e,{...t,headers:{...function(){let{accessToken:e}=i.tN.getState();return{"Content-Type":"application/json",...e?{Authorization:"Bearer ".concat(e)}:{}}}(),...null==t?void 0:t.headers}});if(!r.ok)throw Error((await r.json().catch(()=>({error:"Request failed"}))).error||"HTTP ".concat(r.status));return r.json()}function o(e,t){let r=new URLSearchParams;return e&&r.set("scope",e),t&&r.set("status",t),(0,a.a)({queryKey:["marketplace-vehicles",e,t],queryFn:()=>n("/api/marketplace/vehicles?".concat(r))})}function c(e){return(0,a.a)({queryKey:["marketplace-vehicle",e],queryFn:()=>n("/api/marketplace/vehicles/".concat(e)),enabled:!!e})}function d(){let e=(0,l.NL)();return(0,s.D)({mutationFn:e=>n("/api/marketplace/vehicles",{method:"POST",body:JSON.stringify(e)}),onSuccess:()=>{e.invalidateQueries({queryKey:["marketplace-vehicles"]})}})}function u(){let e=(0,l.NL)();return(0,s.D)({mutationFn:e=>{let{id:t,data:r}=e;return n("/api/marketplace/vehicles/".concat(t),{method:"PUT",body:JSON.stringify(r)})},onSuccess:(t,r)=>{let{id:a}=r;e.invalidateQueries({queryKey:["marketplace-vehicles"]}),e.invalidateQueries({queryKey:["marketplace-vehicle",a]})}})}function m(){let e=(0,l.NL)();return(0,s.D)({mutationFn:e=>n("/api/marketplace/vehicles/".concat(e),{method:"DELETE"}),onSuccess:()=>{e.invalidateQueries({queryKey:["marketplace-vehicles"]})}})}function g(){let e=(0,l.NL)();return(0,s.D)({mutationFn:e=>n("/api/marketplace/vehicles/".concat(e,"/submit"),{method:"POST"}),onSuccess:()=>{e.invalidateQueries({queryKey:["marketplace-vehicles"]})}})}function x(){let e=(0,l.NL)();return(0,s.D)({mutationFn:e=>n("/api/marketplace/requests",{method:"POST",body:JSON.stringify(e)}),onSuccess:()=>{e.invalidateQueries({queryKey:["vehicle-requests"]})}})}function h(){return(0,a.a)({queryKey:["notifications","unread"],queryFn:()=>n("/api/marketplace/notifications?unread=true"),refetchInterval:15e3})}function p(){let e=(0,l.NL)();return(0,s.D)({mutationFn:e=>n("/api/marketplace/notifications/".concat(e,"/read"),{method:"POST"}),onSuccess:()=>{e.invalidateQueries({queryKey:["notifications"]})}})}},4191:function(e,t,r){r.d(t,{Rm:function(){return i},mc:function(){return s},tN:function(){return o}});var a=r(3011),l=r(6885);function s(e){if(!e)return!0;try{let t=e.split(".");if(3!==t.length)return!0;let r=JSON.parse(atob(t[1]));if(!r.exp)return!1;let a=Math.floor(Date.now()/1e3);return r.exp<a}catch(e){return console.error("Error decoding token:",e),!0}}function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:60;if(!e)return!0;try{let r=e.split(".");if(3!==r.length)return!0;let a=JSON.parse(atob(r[1]));if(!a.exp)return!1;let l=Math.floor(Date.now()/1e3);return a.exp<l+t}catch(e){return console.error("Error decoding token:",e),!0}}let n={getItem:e=>{let t=localStorage.getItem(e);return t?JSON.parse(t):null},setItem:(e,t)=>{localStorage.setItem(e,JSON.stringify(t))},removeItem:e=>{localStorage.removeItem(e)}},o=(0,a.U)()((0,l.tJ)((e,t)=>({user:null,accessToken:null,refreshToken:null,isAuthenticated:!1,isHydrated:!1,isInitialized:!1,setAuth:(t,r,a)=>{e({user:t,accessToken:r,refreshToken:a||null,isAuthenticated:!0,isHydrated:!0,isInitialized:!0})},updateUser:t=>e(e=>({...e,user:t})),setAccessToken:t=>e({accessToken:t}),clearAuth:()=>{e({user:null,accessToken:null,refreshToken:null,isAuthenticated:!1,isHydrated:!0,isInitialized:!0})},setHydrated:t=>e({isHydrated:t}),setInitialized:t=>e({isInitialized:t}),isTokenExpired:()=>{let{accessToken:e}=t();return s(e)}}),{name:"auth-storage",storage:(0,l.FL)(()=>n),partialize:e=>({user:e.user,accessToken:e.accessToken,refreshToken:e.refreshToken,isAuthenticated:e.isAuthenticated}),onRehydrateStorage:()=>e=>{if(e&&(e.isHydrated=!0,e.isAuthenticated&&e.accessToken)){let t=s(e.accessToken),r=!!e.refreshToken;t&&!r&&(console.warn("Token expired and no refresh token available, clearing auth"),e.user=null,e.accessToken=null,e.refreshToken=null,e.isAuthenticated=!1)}}}))},999:function(e,t,r){r.d(t,{C:function(){return l}});var a=r(4438);let l=e=>{let{type:t,message:r,duration:l=2e3,position:s="top-center"}=e,i={color:"#fff"},n={success:"#4CAF50",error:"#FF5722",info:"#2196F3",warning:"#FFC107"};switch(a.Am.dismiss(),t){case"success":a.Am.success(r,{duration:l,style:{...i,backgroundColor:n.success},position:s});break;case"error":a.Am.error(r,{duration:l,style:{...i,backgroundColor:n.error},position:s});break;case"info":(0,a.Am)(r,{duration:l,style:{...i,backgroundColor:n.info},position:s});break;case"warning":(0,a.Am)(r,{duration:l,style:{...i,backgroundColor:n.warning},position:s});break;default:console.warn("Invalid toast type")}}},8440:function(e,t,r){r.d(t,{O:function(){return v}});var a=r(7437),l=r(2265),s=r(9376),i=r(2660),n=r(9397),o=r(9763);let c=(0,o.Z)("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);var d=r(2489);let u=(0,o.Z)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);var m=r(4743),g=r(862),x=r(999);let h=[{value:"",label:"Select type"},{value:"sedan",label:"Sedan"},{value:"suv",label:"SUV"},{value:"truck",label:"Truck"},{value:"coupe",label:"Coupe"},{value:"convertible",label:"Convertible"},{value:"wagon",label:"Wagon"},{value:"van",label:"Van"},{value:"hatchback",label:"Hatchback"},{value:"sports",label:"Sports Car"},{value:"luxury",label:"Luxury"},{value:"electric",label:"Electric"},{value:"hybrid",label:"Hybrid"},{value:"other",label:"Other"}],p=[{value:"",label:"Select transmission"},{value:"automatic",label:"Automatic"},{value:"manual",label:"Manual"},{value:"cvt",label:"CVT"},{value:"dual-clutch",label:"Dual Clutch"}],b=[{value:"",label:"Select fuel type"},{value:"gasoline",label:"Gasoline"},{value:"diesel",label:"Diesel"},{value:"electric",label:"Electric"},{value:"hybrid",label:"Hybrid"},{value:"plug-in-hybrid",label:"Plug-in Hybrid"},{value:"flex-fuel",label:"Flex Fuel"},{value:"hydrogen",label:"Hydrogen"}],y=[{value:"",label:"Select drivetrain"},{value:"fwd",label:"Front-Wheel Drive (FWD)"},{value:"rwd",label:"Rear-Wheel Drive (RWD)"},{value:"awd",label:"All-Wheel Drive (AWD)"},{value:"4wd",label:"Four-Wheel Drive (4WD)"}],f={title:"",make:"",model:"",year:new Date().getFullYear(),price_usd:0,vehicle_type:"",exterior_color:"",interior_color:"",transmission:"",fuel_type:"",engine_size:"",drivetrain:"",mileage:0,vin:"",description:"",features:[],location_city:"",location_state:"",image_urls:[]};function v(e){let{vehicleId:t}=e,r=(0,s.useRouter)(),o=!!t,{data:v,isLoading:j}=(0,g.ZP)(t||""),N=(0,g.hr)(),k=(0,g.r_)(),w=(0,g.Iy)(),[_,C]=(0,l.useState)(f),[F,S]=(0,l.useState)(""),[T,A]=(0,l.useState)(""),[D,L]=(0,l.useState)(!1),[E,q]=(0,l.useState)(!1),[I,P]=(0,l.useState)({}),[z,Z]=(0,l.useState)(!1);(0,l.useEffect)(()=>{o&&v&&!z&&(C({title:v.title||"",make:v.make||"",model:v.model||"",year:v.year||new Date().getFullYear(),price_usd:v.price_usd||0,vehicle_type:v.vehicle_type||"",exterior_color:v.exterior_color||"",interior_color:v.interior_color||"",transmission:v.transmission||"",fuel_type:v.fuel_type||"",engine_size:v.engine_size||"",drivetrain:v.drivetrain||"",mileage:v.mileage||0,vin:v.vin||"",description:v.description||"",features:v.features||[],location_city:v.location_city||"",location_state:v.location_state||"",image_urls:v.images?v.images.map(e=>e.url):[]}),S((v.features||[]).join(", ")),Z(!0))},[o,v,z]);let H=(0,l.useCallback)((e,t)=>{C(r=>({...r,[e]:t})),I[e]&&P(t=>{let r={...t};return delete r[e],r})},[I]);function R(){let e=T.trim();if(e){try{new URL(e)}catch(e){(0,x.C)({type:"error",message:"Please enter a valid URL."});return}if(_.image_urls.includes(e)){(0,x.C)({type:"warning",message:"This image URL has already been added."});return}H("image_urls",[..._.image_urls,e]),A("")}}function M(){let e={};return _.title.trim()||(e.title="Title is required."),_.make.trim()||(e.make="Make is required."),_.model.trim()||(e.model="Model is required."),(!_.year||_.year<1900||_.year>new Date().getFullYear()+2)&&(e.year="Please enter a valid year."),(!_.price_usd||_.price_usd<=0)&&(e.price_usd="Price must be greater than 0."),_.vehicle_type||(e.vehicle_type="Vehicle type is required."),_.description.trim()||(e.description="Description is required."),_.location_city.trim()||(e.location_city="City is required."),_.location_state.trim()||(e.location_state="State is required."),P(e),0===Object.keys(e).length}async function O(){if(!M()){(0,x.C)({type:"error",message:"Please fix the errors before saving."});return}L(!0);try{o&&t?(await k.mutateAsync({id:t,data:_}),(0,x.C)({type:"success",message:"Listing updated successfully."})):(await N.mutateAsync(_),(0,x.C)({type:"success",message:"Draft saved successfully."})),r.push("/seller")}catch(t){let e=t instanceof Error?t.message:"Failed to save listing.";(0,x.C)({type:"error",message:e})}finally{L(!1)}}async function W(){if(!M()){(0,x.C)({type:"error",message:"Please fix the errors before submitting."});return}q(!0);try{let e=t;o&&t?await k.mutateAsync({id:t,data:_}):e=(await N.mutateAsync(_)).id,e&&await w.mutateAsync(e),(0,x.C)({type:"success",message:"Listing submitted for review."}),r.push("/seller")}catch(t){let e=t instanceof Error?t.message:"Failed to save and submit listing.";(0,x.C)({type:"error",message:e})}finally{q(!1)}}if(o&&j)return(0,a.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,a.jsx)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,a.jsxs)("div",{className:"animate-pulse space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"h-10 w-10 bg-gray-200 rounded"}),(0,a.jsx)("div",{className:"h-8 w-64 bg-gray-200 rounded"})]}),(0,a.jsx)("div",{className:"space-y-4",children:[...Array(6)].map((e,t)=>(0,a.jsx)("div",{className:"h-12 bg-gray-200 rounded-lg"},t))})]})})});let U=D||E;return(0,a.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-8",children:[(0,a.jsx)("button",{onClick:()=>r.push("/seller"),className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-colors","aria-label":"Back to dashboard",children:(0,a.jsx)(i.Z,{className:"h-5 w-5"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:o?"Edit Listing":"Create New Listing"}),(0,a.jsx)("p",{className:"mt-1 text-gray-500",children:o?"Update your vehicle listing details.":"Fill in the details for your new vehicle listing."})]})]}),o&&(null==v?void 0:v.status)==="REJECTED"&&v.rejection_reason&&(0,a.jsxs)("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-xl",children:[(0,a.jsx)("p",{className:"text-sm font-semibold text-red-800",children:"This listing was rejected:"}),(0,a.jsx)("p",{className:"text-sm text-red-700 mt-1",children:v.rejection_reason}),(0,a.jsx)("p",{className:"text-sm text-red-600 mt-2",children:"Please address the issues above and resubmit for review."})]}),(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("section",{className:"bg-white rounded-xl border border-gray-200 p-5 sm:p-6",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-5",children:"Basic Information"}),(0,a.jsxs)("div",{className:"space-y-5",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-1",children:["Listing Title ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)("input",{id:"title",type:"text",value:_.title,onChange:e=>H("title",e.target.value),placeholder:"e.g. 2023 Toyota Camry XSE - Low Miles",className:"w-full px-3 py-2.5 border rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 ".concat(I.title?"border-red-300 bg-red-50":"border-gray-300"),disabled:U}),I.title&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-600",children:I.title})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{htmlFor:"make",className:"block text-sm font-medium text-gray-700 mb-1",children:["Make ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)("input",{id:"make",type:"text",value:_.make,onChange:e=>H("make",e.target.value),placeholder:"e.g. Toyota",className:"w-full px-3 py-2.5 border rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 ".concat(I.make?"border-red-300 bg-red-50":"border-gray-300"),disabled:U}),I.make&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-600",children:I.make})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{htmlFor:"model",className:"block text-sm font-medium text-gray-700 mb-1",children:["Model ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)("input",{id:"model",type:"text",value:_.model,onChange:e=>H("model",e.target.value),placeholder:"e.g. Camry",className:"w-full px-3 py-2.5 border rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 ".concat(I.model?"border-red-300 bg-red-50":"border-gray-300"),disabled:U}),I.model&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-600",children:I.model})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{htmlFor:"year",className:"block text-sm font-medium text-gray-700 mb-1",children:["Year ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)("input",{id:"year",type:"number",value:_.year,onChange:e=>H("year",parseInt(e.target.value,10)||0),placeholder:"e.g. 2023",min:1900,max:new Date().getFullYear()+2,className:"w-full px-3 py-2.5 border rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 ".concat(I.year?"border-red-300 bg-red-50":"border-gray-300"),disabled:U}),I.year&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-600",children:I.year})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{htmlFor:"price_usd",className:"block text-sm font-medium text-gray-700 mb-1",children:["Price (USD) ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 text-sm",children:"$"}),(0,a.jsx)("input",{id:"price_usd",type:"number",value:_.price_usd||"",onChange:e=>H("price_usd",parseFloat(e.target.value)||0),placeholder:"0",min:0,className:"w-full pl-7 pr-3 py-2.5 border rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 ".concat(I.price_usd?"border-red-300 bg-red-50":"border-gray-300"),disabled:U})]}),I.price_usd&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-600",children:I.price_usd})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"vin",className:"block text-sm font-medium text-gray-700 mb-1",children:"VIN"}),(0,a.jsx)("input",{id:"vin",type:"text",value:_.vin,onChange:e=>H("vin",e.target.value.toUpperCase()),placeholder:"e.g. 1HGCG5655WA041649",maxLength:17,className:"w-full px-3 py-2.5 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500",disabled:U})]})]})]})]}),(0,a.jsxs)("section",{className:"bg-white rounded-xl border border-gray-200 p-5 sm:p-6",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-5",children:"Vehicle Details"}),(0,a.jsxs)("div",{className:"space-y-5",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{htmlFor:"vehicle_type",className:"block text-sm font-medium text-gray-700 mb-1",children:["Vehicle Type ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)("select",{id:"vehicle_type",value:_.vehicle_type,onChange:e=>H("vehicle_type",e.target.value),className:"w-full px-3 py-2.5 border rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 bg-white ".concat(I.vehicle_type?"border-red-300 bg-red-50":"border-gray-300"),disabled:U,children:h.map(e=>(0,a.jsx)("option",{value:e.value,children:e.label},e.value))}),I.vehicle_type&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-600",children:I.vehicle_type})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"transmission",className:"block text-sm font-medium text-gray-700 mb-1",children:"Transmission"}),(0,a.jsx)("select",{id:"transmission",value:_.transmission,onChange:e=>H("transmission",e.target.value),className:"w-full px-3 py-2.5 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 bg-white",disabled:U,children:p.map(e=>(0,a.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"fuel_type",className:"block text-sm font-medium text-gray-700 mb-1",children:"Fuel Type"}),(0,a.jsx)("select",{id:"fuel_type",value:_.fuel_type,onChange:e=>H("fuel_type",e.target.value),className:"w-full px-3 py-2.5 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 bg-white",disabled:U,children:b.map(e=>(0,a.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"drivetrain",className:"block text-sm font-medium text-gray-700 mb-1",children:"Drivetrain"}),(0,a.jsx)("select",{id:"drivetrain",value:_.drivetrain,onChange:e=>H("drivetrain",e.target.value),className:"w-full px-3 py-2.5 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 bg-white",disabled:U,children:y.map(e=>(0,a.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"engine_size",className:"block text-sm font-medium text-gray-700 mb-1",children:"Engine Size"}),(0,a.jsx)("input",{id:"engine_size",type:"text",value:_.engine_size,onChange:e=>H("engine_size",e.target.value),placeholder:"e.g. 2.5L",className:"w-full px-3 py-2.5 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500",disabled:U})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"mileage",className:"block text-sm font-medium text-gray-700 mb-1",children:"Mileage"}),(0,a.jsx)("input",{id:"mileage",type:"number",value:_.mileage||"",onChange:e=>H("mileage",parseInt(e.target.value,10)||0),placeholder:"e.g. 25000",min:0,className:"w-full px-3 py-2.5 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500",disabled:U})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"exterior_color",className:"block text-sm font-medium text-gray-700 mb-1",children:"Exterior Color"}),(0,a.jsx)("input",{id:"exterior_color",type:"text",value:_.exterior_color,onChange:e=>H("exterior_color",e.target.value),placeholder:"e.g. Pearl White",className:"w-full px-3 py-2.5 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500",disabled:U})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"interior_color",className:"block text-sm font-medium text-gray-700 mb-1",children:"Interior Color"}),(0,a.jsx)("input",{id:"interior_color",type:"text",value:_.interior_color,onChange:e=>H("interior_color",e.target.value),placeholder:"e.g. Black Leather",className:"w-full px-3 py-2.5 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500",disabled:U})]})]})]})]}),(0,a.jsxs)("section",{className:"bg-white rounded-xl border border-gray-200 p-5 sm:p-6",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-5",children:"Description & Features"}),(0,a.jsxs)("div",{className:"space-y-5",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:["Description ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)("textarea",{id:"description",value:_.description,onChange:e=>H("description",e.target.value),rows:5,placeholder:"Describe your vehicle in detail. Include condition, history, notable features, etc.",className:"w-full px-3 py-2.5 border rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 resize-y ".concat(I.description?"border-red-300 bg-red-50":"border-gray-300"),disabled:U}),I.description&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-600",children:I.description})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"features",className:"block text-sm font-medium text-gray-700 mb-1",children:"Features (comma-separated)"}),(0,a.jsx)("input",{id:"features",type:"text",value:F,onChange:e=>{var t;S(t=e.target.value),H("features",t.split(",").map(e=>e.trim()).filter(e=>e.length>0))},placeholder:"e.g. Leather seats, Sunroof, Backup camera, Apple CarPlay",className:"w-full px-3 py-2.5 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500",disabled:U}),_.features.length>0&&(0,a.jsx)("div",{className:"flex flex-wrap gap-2 mt-2",children:_.features.map((e,t)=>(0,a.jsx)("span",{className:"inline-flex items-center px-2.5 py-1 bg-emerald-50 text-emerald-700 rounded-full text-xs font-medium",children:e},t))})]})]})]}),(0,a.jsxs)("section",{className:"bg-white rounded-xl border border-gray-200 p-5 sm:p-6",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-5",children:"Location"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{htmlFor:"location_city",className:"block text-sm font-medium text-gray-700 mb-1",children:["City ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)("input",{id:"location_city",type:"text",value:_.location_city,onChange:e=>H("location_city",e.target.value),placeholder:"e.g. Los Angeles",className:"w-full px-3 py-2.5 border rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 ".concat(I.location_city?"border-red-300 bg-red-50":"border-gray-300"),disabled:U}),I.location_city&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-600",children:I.location_city})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{htmlFor:"location_state",className:"block text-sm font-medium text-gray-700 mb-1",children:["State ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)("input",{id:"location_state",type:"text",value:_.location_state,onChange:e=>H("location_state",e.target.value),placeholder:"e.g. California",className:"w-full px-3 py-2.5 border rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 ".concat(I.location_state?"border-red-300 bg-red-50":"border-gray-300"),disabled:U}),I.location_state&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-600",children:I.location_state})]})]})]}),(0,a.jsxs)("section",{className:"bg-white rounded-xl border border-gray-200 p-5 sm:p-6",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-5",children:"Images"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("input",{type:"text",value:T,onChange:e=>A(e.target.value),onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),R())},placeholder:"Paste image URL here...",className:"flex-1 px-3 py-2.5 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500",disabled:U}),(0,a.jsxs)("button",{type:"button",onClick:R,disabled:U||!T.trim(),className:"inline-flex items-center gap-1.5 px-4 py-2.5 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,a.jsx)(n.Z,{className:"h-4 w-4"}),"Add"]})]}),0===_.image_urls.length?(0,a.jsxs)("div",{className:"border-2 border-dashed border-gray-200 rounded-xl py-10 text-center",children:[(0,a.jsx)(c,{className:"h-10 w-10 text-gray-300 mx-auto mb-3"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"No images added yet."}),(0,a.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"Add image URLs to showcase your vehicle."})]}):(0,a.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3",children:_.image_urls.map((e,t)=>(0,a.jsxs)("div",{className:"relative group rounded-lg overflow-hidden border border-gray-200",children:[(0,a.jsx)("img",{src:e,alt:"Vehicle image ".concat(t+1),className:"w-full h-28 object-cover bg-gray-100",onError:e=>{e.target.src="",e.target.style.display="none",e.target.parentElement.classList.add("bg-gray-100")}}),(0,a.jsx)("button",{type:"button",onClick:()=>{H("image_urls",_.image_urls.filter((e,r)=>r!==t))},disabled:U,className:"absolute top-1.5 right-1.5 p-1 bg-red-500 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity hover:bg-red-600","aria-label":"Remove image",children:(0,a.jsx)(d.Z,{className:"h-3.5 w-3.5"})}),0===t&&(0,a.jsx)("span",{className:"absolute bottom-1.5 left-1.5 text-xs bg-emerald-600 text-white px-2 py-0.5 rounded-full font-medium",children:"Primary"})]},t))})]})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center justify-end gap-3 pb-8",children:[(0,a.jsx)("button",{type:"button",onClick:()=>r.push("/seller"),disabled:U,className:"px-5 py-2.5 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50",children:"Cancel"}),(0,a.jsxs)("button",{type:"button",onClick:O,disabled:U,className:"inline-flex items-center justify-center gap-2 px-5 py-2.5 text-sm font-medium text-emerald-700 bg-emerald-50 border border-emerald-200 rounded-lg hover:bg-emerald-100 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,a.jsx)(u,{className:"h-4 w-4"}),D?"Saving...":"Save Draft"]}),(0,a.jsxs)("button",{type:"button",onClick:W,disabled:U,className:"inline-flex items-center justify-center gap-2 px-5 py-2.5 text-sm font-medium text-white bg-emerald-600 rounded-lg hover:bg-emerald-700 transition-colors shadow-sm disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,a.jsx)(m.Z,{className:"h-4 w-4"}),E?"Submitting...":"Save & Submit for Review"]})]})]})]})})}}}]);