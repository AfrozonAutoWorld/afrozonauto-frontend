(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{4242:function(e,t,s){Promise.resolve().then(s.t.bind(s,2972,23)),Promise.resolve().then(s.bind(s,4438)),Promise.resolve().then(s.t.bind(s,2778,23)),Promise.resolve().then(s.bind(s,1662)),Promise.resolve().then(s.bind(s,2335)),Promise.resolve().then(s.bind(s,6765))},1662:function(e,t,s){"use strict";s.d(t,{Header:function(){return j}});var r=s(7437),a=s(2265),l=s(7648),n=s(9376),i=s(7662),c=s(4413),o=s(5466),d=s(7692),m=s(2489),x=s(8293),u=s(4766),h=s(862),f=s(605);function p(){let{status:e}=(0,f.useSession)(),[t,s]=(0,a.useState)(!1),n=(0,a.useRef)(null),{data:i}=(0,h.CX)(),c=(0,h.p3)(),o=(null==i?void 0:i.length)||0;return((0,a.useEffect)(()=>{function e(e){n.current&&!n.current.contains(e.target)&&s(!1)}return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),"unauthenticated"===e)?null:(0,r.jsxs)("div",{ref:n,className:"relative",children:[(0,r.jsxs)("button",{onClick:()=>s(!t),className:"relative p-2 text-gray-600 hover:text-emerald-600 transition-colors",children:[(0,r.jsx)(u.Z,{className:"w-5 h-5"}),o>0&&(0,r.jsx)("span",{className:"absolute -top-0.5 -right-0.5 w-4 h-4 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:o>9?"9+":o})]}),t&&(0,r.jsxs)("div",{className:"absolute right-0 mt-2 w-80 bg-white rounded-xl shadow-lg border border-gray-200 z-50 overflow-hidden",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 border-b border-gray-100",children:[(0,r.jsx)("span",{className:"font-semibold text-gray-900 text-sm",children:"Notifications"}),o>0&&(0,r.jsx)("button",{onClick:()=>{c.mutate("all"),s(!1)},className:"text-xs text-emerald-600 hover:text-emerald-700 font-medium",children:"Mark all read"})]}),(0,r.jsx)("div",{className:"max-h-80 overflow-y-auto",children:(null==i?void 0:i.length)?i.map(e=>(0,r.jsx)("div",{className:"px-4 py-3 hover:bg-gray-50 border-b border-gray-50 last:border-0",children:e.link?(0,r.jsxs)(l.default,{href:e.link,onClick:()=>{c.mutate(e.id),s(!1)},className:"block",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.title}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-0.5 line-clamp-2",children:e.message})]}):(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.title}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-0.5 line-clamp-2",children:e.message})]})},e.id)):(0,r.jsx)("div",{className:"px-4 py-8 text-center text-gray-500 text-sm",children:"No new notifications"})})]})]})}function j(){var e;let[t,s]=(0,a.useState)(!1),{data:u}=(0,f.useSession)(),h=(0,n.useRouter)(),j=null==u?void 0:u.user,g=async()=>{await (0,f.signOut)(),h.push("/")},v=(null==j?void 0:j.role)==="SELLER"||(null==j?void 0:j.role)==="ADMIN";return null==j||j.role,(0,r.jsx)("header",{className:"bg-white border-b border-gray-200 sticky top-0 z-50",children:(0,r.jsxs)("nav",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,r.jsxs)("div",{className:"flex justify-between h-16",children:[(0,r.jsx)("div",{className:"flex items-center",children:(0,r.jsxs)(l.default,{href:"/",className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-10 h-10 bg-emerald-600 rounded-lg flex items-center justify-center",children:(0,r.jsx)(i.Z,{className:"w-6 h-6 text-white"})}),(0,r.jsxs)("div",{className:"hidden sm:block",children:[(0,r.jsx)("span",{className:"text-xl font-bold text-gray-900",children:"Afrozon"}),(0,r.jsx)("span",{className:"text-xl font-light text-emerald-600",children:" AutoGlobal"})]})]})}),(0,r.jsxs)("div",{className:"hidden md:flex items-center gap-6",children:[(0,r.jsx)(l.default,{href:"/marketplace",className:"text-gray-600 hover:text-emerald-600 font-medium transition-colors",children:"Browse Vehicles"}),(0,r.jsx)(l.default,{href:"/marketplace/calculator",className:"text-gray-600 hover:text-emerald-600 font-medium transition-colors",children:"Price Calculator"}),(0,r.jsx)(l.default,{href:"/marketplace/how-it-works",className:"text-gray-600 hover:text-emerald-600 font-medium transition-colors",children:"How It Works"}),j?(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[v&&(0,r.jsxs)(l.default,{href:"/partners",className:"flex items-center gap-1.5 text-gray-600 hover:text-emerald-600 transition-colors",children:[(0,r.jsx)(c.Z,{className:"w-4 h-4"}),(0,r.jsx)("span",{className:"text-sm font-medium",children:"Sell"})]}),(0,r.jsxs)(l.default,{href:"/marketplace/buyer",className:"flex items-center gap-1.5 text-gray-600 hover:text-emerald-600 transition-colors",children:[(0,r.jsx)(o.Z,{className:"w-4 h-4"}),(0,r.jsx)("span",{className:"text-sm font-medium",children:"Dashboard"})]}),(0,r.jsx)(p,{}),(0,r.jsxs)("div",{className:"flex items-center gap-2 pl-3 border-l border-gray-200",children:[(0,r.jsx)("span",{className:"text-sm text-gray-600",children:(null==j?void 0:null===(e=j.profile)||void 0===e?void 0:e.firstName)||j.email}),(0,r.jsx)("button",{onClick:g,className:"p-2 text-gray-400 hover:text-red-500 transition-colors",children:(0,r.jsx)(d.Z,{className:"w-5 h-5"})})]})]}):(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)(l.default,{href:"/login",className:"text-gray-600 hover:text-emerald-600 font-medium transition-colors",children:"Sign In"}),(0,r.jsx)(l.default,{href:"/onboarding",className:"bg-emerald-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-emerald-700 transition-colors",children:"Get Started"})]})]}),(0,r.jsxs)("div",{className:"md:hidden flex items-center gap-2",children:[j&&(0,r.jsx)(p,{}),(0,r.jsx)("button",{onClick:()=>s(!t),className:"p-2 text-gray-600",children:t?(0,r.jsx)(m.Z,{className:"w-6 h-6"}):(0,r.jsx)(x.Z,{className:"w-6 h-6"})})]})]}),t&&(0,r.jsx)("div",{className:"md:hidden py-4 border-t border-gray-100",children:(0,r.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,r.jsx)(l.default,{href:"/marketplace",className:"text-gray-600 hover:text-emerald-600 font-medium",onClick:()=>s(!1),children:"Browse Vehicles"}),(0,r.jsx)(l.default,{href:"/marketplace/calculator",className:"text-gray-600 hover:text-emerald-600 font-medium",onClick:()=>s(!1),children:"Price Calculator"}),(0,r.jsx)(l.default,{href:"/marketplace/how-it-works",className:"text-gray-600 hover:text-emerald-600 font-medium",onClick:()=>s(!1),children:"How It Works"}),j?(0,r.jsxs)(r.Fragment,{children:[v&&(0,r.jsxs)(l.default,{href:"/partners",className:"flex items-center gap-2 text-gray-600 hover:text-emerald-600",onClick:()=>s(!1),children:[(0,r.jsx)(c.Z,{className:"w-5 h-5"}),(0,r.jsx)("span",{children:"Seller Dashboard"})]}),(0,r.jsxs)(l.default,{href:"/marketplace",className:"flex items-center gap-2 text-gray-600 hover:text-emerald-600",onClick:()=>s(!1),children:[(0,r.jsx)(o.Z,{className:"w-5 h-5"}),(0,r.jsx)("span",{children:"Dashboard"})]}),(0,r.jsxs)("button",{onClick:()=>{g(),s(!1)},className:"flex items-center gap-2 text-red-500",children:[(0,r.jsx)(d.Z,{className:"w-5 h-5"}),(0,r.jsx)("span",{children:"Sign Out"})]})]}):(0,r.jsxs)("div",{className:"flex flex-col gap-3 pt-4 border-t border-gray-100",children:[(0,r.jsx)(l.default,{href:"/login",className:"text-gray-600 hover:text-emerald-600 font-medium",onClick:()=>s(!1),children:"Sign In"}),(0,r.jsx)(l.default,{href:"/onboarding",className:"bg-emerald-600 text-white px-4 py-2 rounded-lg font-medium text-center hover:bg-emerald-700",onClick:()=>s(!1),children:"Get Started"})]})]})})]})})}},862:function(e,t,s){"use strict";s.d(t,{CX:function(){return o},eV:function(){return c},p3:function(){return d}});var r=s(1713),a=s(9827),l=s(1770),n=s(605);async function i(e,t){let s=await fetch(e,{...t,headers:{...function(){let{data:e}=(0,n.useSession)(),t=null==e?void 0:e.accessToken;return{"Content-Type":"application/json",...t?{Authorization:"Bearer ".concat(t)}:{}}}(),...null==t?void 0:t.headers}});if(!s.ok)throw Error((await s.json().catch(()=>({error:"Request failed"}))).error||"HTTP ".concat(s.status));return s.json()}function c(e,t){let s=new URLSearchParams;return e&&s.set("scope",e),t&&s.set("status",t),(0,r.a)({queryKey:["marketplace-vehicles",e,t],queryFn:()=>i("/api/marketplace/vehicles?".concat(s))})}function o(){return(0,r.a)({queryKey:["notifications","unread"],queryFn:()=>i("/api/marketplace/notifications?unread=true"),refetchInterval:15e3})}function d(){let e=(0,a.NL)();return(0,l.D)({mutationFn:e=>i("/api/marketplace/notifications/".concat(e,"/read"),{method:"POST"}),onSuccess:()=>{e.invalidateQueries({queryKey:["notifications"]})}})}},2335:function(e,t,s){"use strict";s.d(t,{default:function(){return i}});var r=s(7437),a=s(2979),l=s(9827),n=s(2265);function i(e){let{children:t}=e,[s]=(0,n.useState)(()=>new a.S);return(0,r.jsx)(l.aH,{client:s,children:t})}},6765:function(e,t,s){"use strict";s.d(t,{Providers:function(){return l}});var r=s(7437),a=s(605);function l(e){let{children:t}=e;return(0,r.jsx)(a.SessionProvider,{children:t})}},2778:function(){}},function(e){e.O(0,[461,451,605,21,799,713,482,971,117,744],function(){return e(e.s=4242)}),_N_E=e.O()}]);