(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[174],{1503:function(e,s,t){Promise.resolve().then(t.bind(t,7942))},9432:function(e,s,t){"use strict";t.d(s,{T:function(){return h}});var r=t(9827),a=t(1770),l=t(605),n=t(9376),i=t(6305);let o=async e=>{i.x.post("/auth/register-start",e)},d=async e=>{i.x.post("/auth/verify",e)},c=async e=>{i.x.post("/auth/register",e)},m=async e=>{i.x.patch("/auth/profile",e)},u=async e=>{i.x.post("/auth/forgot-password",e)},x=async e=>{i.x.post("/auth/reset-password",e)};var g=t(999);function h(){let e=(0,n.useRouter)(),s=(0,r.NL)(),t=(0,a.D)({mutationFn:e=>o(e),onSuccess:(e,s)=>{sessionStorage.setItem("onboarding_email",s.email),(0,g.C)({type:"success",message:"Verification code sent to your email!"})},onError:e=>{var s;(0,g.C)({type:"error",message:(null===(s=e.errors)||void 0===s?void 0:s[0])||e.message||"Failed to send verification code"})}}),i=(0,a.D)({mutationFn:e=>d(e),onSuccess:(e,s)=>{sessionStorage.setItem("verified_email",s.email),sessionStorage.removeItem("onboarding_email"),(0,g.C)({type:"success",message:"Email verified successfully!"})},onError:e=>{var s;(0,g.C)({type:"error",message:(null===(s=e.errors)||void 0===s?void 0:s[0])||e.message||"Verification failed"})}}),h=(0,a.D)({mutationFn:e=>{var s;let t="".concat(e.firstName," ").concat(e.lastName).trim();return c({email:e.email,password:e.password,firstName:e.firstName,lastName:e.lastName,fullName:t,phone:e.phone,role:null!==(s=e.role)&&void 0!==s?s:"BUYER",isActive:!0})},onSuccess:()=>{sessionStorage.removeItem("verified_email"),(0,g.C)({type:"success",message:"Account created successfully! Please login."})},onError:e=>{(0,g.C)({type:"error",message:e.message||"Failed to complete profile"})}}),p=(0,a.D)({mutationFn:async e=>{let s=await (0,l.signIn)("credentials",{redirect:!1,email:e.email,password:e.password});if(null==s?void 0:s.error)throw Error(s.error);return s},onSuccess:()=>{s.invalidateQueries(),(0,g.C)({type:"success",message:"Login successful!"}),e.push("/marketplace/buyer")},onError:e=>{(0,g.C)({type:"error",message:e.message||"Login failed"})}}),y=(0,a.D)({mutationFn:e=>u(e),onSuccess:(e,s)=>{sessionStorage.setItem("reset_email",s.email),(0,g.C)({type:"success",message:"Password reset code sent to your email!"})},onError:e=>{(0,g.C)({type:"error",message:e.message||"Failed to send reset code"})}}),b=(0,a.D)({mutationFn:e=>{let{confirmPassword:s,...t}=e;return x(t)},onSuccess:()=>{sessionStorage.removeItem("reset_email"),(0,g.C)({type:"success",message:"Password changed successfully. Please login again."}),(0,l.signOut)({redirect:!1}).then(()=>{e.push("/login")})},onError:e=>{(0,g.C)({type:"error",message:e.message||"Failed to reset password"})}}),f=(0,a.D)({mutationFn:e=>m(e),onSuccess:()=>{s.invalidateQueries(),(0,g.C)({type:"success",message:"Profile updated successfully!"})},onError:e=>{(0,g.C)({type:"error",message:e.message||"Failed to update profile"})}}),v=async()=>{await (0,l.signOut)({redirect:!1}),s.clear(),e.push("/")};return{onboarding:t.mutateAsync,verify:i.mutateAsync,completeProfile:h.mutateAsync,signIn:p.mutateAsync,forgotPassword:y.mutateAsync,resetPassword:b.mutateAsync,updateProfile:f.mutateAsync,signOut:v,isOnboarding:t.isPending,isVerifying:i.isPending,isCompletingProfile:h.isPending,isSigningIn:p.isPending,isForgettingPassword:y.isPending,isResettingPassword:b.isPending,isUpdatingProfile:f.isPending,onboardingError:t.error,verifyError:i.error,completeProfileError:h.error,signInError:p.error,forgotPasswordError:y.error,resetPasswordError:b.error,updateProfileError:f.error}}},7951:function(e,s,t){"use strict";t.d(s,{c:function(){return a}});var r=t(2265);function a(e){let{schema:s,initialValues:t,onSubmit:a}=e,[l,n]=(0,r.useState)(t),[i,o]=(0,r.useState)({}),[d,c]=(0,r.useState)(!1),m=()=>{let e=s.safeParse(l);if(!e.success){let s={};return e.error.issues.forEach(e=>{let t=e.path[0];t&&(s[t]=e.message)}),o(s),!1}return o({}),!0},u=async e=>{if(e.preventDefault(),m()){c(!0);try{await a(l)}finally{c(!1)}}};return{values:l,errors:i,isSubmitting:d,handleChange:e=>{let{name:s,type:t}=e.target,r="checkbox"===t?e.target.checked:e.target.value;n(e=>({...e,[s]:r})),i[s]&&o(e=>({...e,[s]:void 0}))},handleSubmit:u,setFieldValue:(e,s)=>{n(t=>({...t,[e]:s})),i[e]&&o(s=>({...s,[e]:void 0}))},setFieldError:(e,s)=>{o(t=>({...t,[e]:s}))},validateForm:m,validateField:e=>{let t=s.shape[e].safeParse(l[e]);return t.success?(o(s=>({...s,[e]:void 0})),!0):(o(s=>{var r;return{...s,[e]:null===(r=t.error.issues[0])||void 0===r?void 0:r.message}}),!1)},clearErrors:()=>o({}),reset:()=>{n(t),o({}),c(!1)}}}},5846:function(e,s,t){"use strict";t.d(s,{Aj:function(){return n},j4:function(){return i},yi:function(){return l}});var r=t(1713),a=t(8118);function l(){var e,s,t,l,n,i,o,d,c,m;let u=(0,r.a)({queryKey:["orders"],queryFn:async()=>(await a.k.getAllOrder()).data.data.data,staleTime:3e5,refetchOnWindowFocus:!1});return{orders:null!==(i=null===(e=u.data)||void 0===e?void 0:e.orders)&&void 0!==i?i:[],total:null!==(o=null===(s=u.data)||void 0===s?void 0:s.total)&&void 0!==o?o:0,page:null!==(d=null===(t=u.data)||void 0===t?void 0:t.page)&&void 0!==d?d:1,limit:null!==(c=null===(l=u.data)||void 0===l?void 0:l.limit)&&void 0!==c?c:10,totalPages:null!==(m=null===(n=u.data)||void 0===n?void 0:n.totalPages)&&void 0!==m?m:1,isLoading:u.isLoading,isError:u.isError,error:u.error,refetch:u.refetch}}function n(e){let s=(0,r.a)({queryKey:["orders",e],queryFn:async()=>(await a.k.getOrderById(e)).data.data.data,enabled:!!e,staleTime:3e5,refetchOnWindowFocus:!1});return{order:s.data,isLoading:s.isLoading,isError:s.isError,error:s.error,refetch:s.refetch}}function i(e,s){let t=(0,r.a)({queryKey:["orders","costBreakdown",e,s],queryFn:async()=>(await a.k.getPredefinePrices(e,s)).data.data.data,enabled:!!e&&!!s,staleTime:3e5,refetchOnWindowFocus:!1});return{costBreakdown:t.data,isLoading:t.isLoading,isError:t.isError,error:t.error}}},6305:function(e,s,t){"use strict";t.d(s,{x:function(){return n}});var r=t(3464),a=t(605),l=t(257);let n=r.Z.create({baseURL:l.env.NEXT_PUBLIC_API_URL||"https://afrozonauto-backend.onrender.com/api",headers:{"Content-Type":"application/json"}});n.interceptors.request.use(async e=>{let s=await (0,a.getSession)(),t=null==s?void 0:s.accessToken;return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),n.interceptors.response.use(e=>e,e=>{var s;return(null===(s=e.response)||void 0===s?void 0:s.status)===401&&(window.location.href="/login"),Promise.reject(e)})},8118:function(e,s,t){"use strict";t.d(s,{k:function(){return a}});var r=t(6305);let a={getAllOrder:async()=>r.x.get("/orders/my-orders"),requestVehicle:async e=>r.x.post("/orders",e),getOrderById:async e=>r.x.get("/orders/".concat(e)),getPredefinePrices:async(e,s)=>r.x.get("/orders/order-summary/".concat(e,"/?shippingMethod=").concat(s))}},4400:function(e,s,t){"use strict";t.d(s,{S:function(){return a}});var r=t(6305);let a={getAllPayments:()=>r.x.get("/payments/all"),getCurrentUserPayment:()=>r.x.get("/payments/user-mine"),getPaymentById:e=>r.x.get("/payments/payment-id/".concat(e)),paymentInit:e=>r.x.post("/payments/init",e),paymentVerify:e=>r.x.patch("/payments/verify/".concat(e,"?provider=paystack"),{})}},8135:function(e,s,t){"use strict";t.d(s,{LI:function(){return d},X:function(){return i},p6:function(){return o},qA:function(){return l},xG:function(){return n},yG:function(){return c}});let r={sourcing_fee_percent:5,sourcing_fee_min_usd:500,inspection_fee_usd:150,us_handling_fee_usd:350,shipping_roro_base_usd:1800,shipping_container_base_usd:2500,exchange_rate_ngn_usd:1550,timeline_days_roro:45,timeline_days_container:60},a={CAR:1,SEDAN:1,COUPE:1,HATCHBACK:1,WAGON:1.05,CONVERTIBLE:1.05,SUV:1.15,TRUCK:1.25,VAN:1.2,MOTORCYCLE:0};function l(e,s,t){let l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:r,n=a[s]||1,i=Math.max(l.sourcing_fee_percent/100*e,l.sourcing_fee_min_usd),o=l.inspection_fee_usd,d=l.us_handling_fee_usd,c=("RORO"===t?l.shipping_roro_base_usd:l.shipping_container_base_usd)*n,m=e+i+o+d+c,u=m*l.exchange_rate_ngn_usd;return{breakdown:{vehicle_price:e,sourcing_fee:i,inspection_fee:o,us_handling_fee:d,shipping_cost:c,total_usd:m,total_ngn:u,exchange_rate:l.exchange_rate_ngn_usd},estimatedDeliveryDays:"RORO"===t?l.timeline_days_roro:l.timeline_days_container,depositAmount:.3*m}}function n(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"USD";return"NGN"===s?new Intl.NumberFormat("en-NG",{style:"currency",currency:"NGN",minimumFractionDigits:0,maximumFractionDigits:0}).format(e):new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(e)}function i(e){let s=new Date;return s.setDate(s.getDate()+e),s}function o(e){return("string"==typeof e?new Date(e):e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}let d=["Lagos","Abuja","Port Harcourt","Kano","Ibadan","Enugu","Kaduna","Benin City","Warri","Calabar","Aba","Jos","Ilorin","Onitsha","Abeokuta","Uyo","Owerri","Akure","Bauchi","Sokoto"],c=["Toyota","Honda","Ford","Chevrolet","BMW","Mercedes-Benz","Lexus","Nissan","Hyundai","Kia","Mazda","Volkswagen","Audi","Subaru","Jeep","Dodge","Ram","GMC","Acura","Infiniti","Cadillac","Lincoln","Volvo","Land Rover","Porsche"]},999:function(e,s,t){"use strict";t.d(s,{C:function(){return a}});var r=t(4438);let a=e=>{let{type:s,message:t,duration:a=2e3,position:l="top-center"}=e,n={color:"#fff"},i={success:"#4CAF50",error:"#FF5722",info:"#2196F3",warning:"#FFC107"};switch(r.A.dismiss(),s){case"success":r.A.success(t,{duration:a,style:{...n,backgroundColor:i.success},position:l});break;case"error":r.A.error(t,{duration:a,style:{...n,backgroundColor:i.error},position:l});break;case"info":(0,r.A)(t,{duration:a,style:{...n,backgroundColor:i.info},position:l});break;case"warning":(0,r.A)(t,{duration:a,style:{...n,backgroundColor:i.warning},position:l});break;default:console.warn("Invalid toast type")}}},8041:function(e,s,t){"use strict";t.d(s,{HW:function(){return a},I2:function(){return l},S4:function(){return d},Sv:function(){return n},WV:function(){return c},dm:function(){return i},ek:function(){return o}});var r=t(7119);let a=r.Ry({email:r.Z_().email("Please enter a valid email address")}),l=r.Ry({email:r.Z_().email("Please enter a valid email address"),token:r.Z_().min(6,"Verification code must be 6 digits").max(6)}),n=r.Ry({email:r.Z_().email(),password:r.Z_().min(8,"Password must be at least 8 characters").regex(/[A-Z]/,"Password must contain at least one uppercase letter").regex(/[a-z]/,"Password must contain at least one lowercase letter").regex(/[0-9]/,"Password must contain at least one number"),confirmPassword:r.Z_(),firstName:r.Z_().min(2,"First name must be at least 2 characters"),lastName:r.Z_().min(2,"Last name must be at least 2 characters"),phone:r.Z_().regex(/^\+?[1-9]\d{1,14}$/,"Please enter a valid phone number"),role:r.Km(["BUYER","SELLER"]).optional().default("BUYER")}).refine(e=>e.password===e.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]}),i=r.Ry({email:r.Z_().email("Please enter a valid email address"),password:r.Z_().min(1,"Password is required")}),o=r.Ry({email:r.Z_().email("Please enter a valid email address")}),d=r.Ry({email:r.Z_().email("Invalid email"),token:r.Z_().min(6,"Token is required"),newPassword:r.Z_().min(6,"Password must be at least 6 characters"),confirmPassword:r.Z_().min(1,"Please confirm your password")}),c=r.Ry({type:r.Km(["NORMAL","BILLING","SHIPPING"]),street:r.Z_(),firstName:r.Z_(),lastName:r.Z_(),city:r.Z_(),state:r.Z_(),postalCode:r.Z_(),country:r.Z_(),isDefault:r.O7(),additionalInfo:r.Z_().optional(),phoneNumber:r.Z_(),additionalPhoneNumber:r.Z_().optional()})},7942:function(e,s,t){"use strict";t.d(s,{Dashboard:function(){return Q}});var r=t(7437),a=t(2265),l=t(7648),n=t(9376),i=t(2451),o=t(407),d=t(1723),c=t(8736),m=t(8226),u=t(5302),x=t(2252),g=t(4794),h=t(5738),p=t(3774),y=t(340),b=t(7662),f=t(8997),v=t(2369),N=t(8135),j=t(9827),w=t(1770),P=t(1713),C=t(6305);let A={getAllAddresses:async()=>{try{return await C.x.get("/addresses")}catch(e){throw console.error("Error fetching vehicles:",e),Error("Failed to fetch vehicles")}},getDefualtAllAddress:async()=>{try{return await C.x.get("/addresses/default?type=NORMAL")}catch(e){throw console.error("Error fetching vehicles:",e),Error("Failed to fetch vehicles")}},addUserAddress:async e=>C.x.post("/addresses",e),updateAddress:async(e,s)=>{try{return await C.x.patch("/addresses/".concat(e),s)}catch(e){throw console.error("Error updating address:",e),Error("Failed to update address")}},deleteAddress:async e=>{try{return await C.x.delete("/addresses/".concat(e))}catch(e){throw console.error("Error deleting address:",e),Error("Failed to delete address")}}};var _=t(999);function S(){let e=(0,j.NL)(),s=(0,w.D)({mutationFn:e=>A.addUserAddress(e),onSuccess:()=>{e.invalidateQueries({queryKey:["addressess",""]}),e.invalidateQueries({queryKey:["addresses","default"]}),(0,_.C)({type:"success",message:"Address added successfully!"})},onError:e=>{(0,_.C)({type:"error",message:e.message||"Failed to add address"})}}),t=(0,w.D)({mutationFn:e=>{let{id:s,data:t}=e;return A.updateAddress(s,t)},onSuccess:()=>{e.invalidateQueries({queryKey:["addresses"]}),e.invalidateQueries({queryKey:["addresses","default"]}),(0,_.C)({type:"success",message:"Address updated successfully!"})},onError:e=>{(0,_.C)({type:"error",message:e.message||"Failed to add address"})}}),r=(0,w.D)({mutationFn:e=>{let{id:s}=e;return A.deleteAddress(s)},onSuccess:()=>{e.invalidateQueries({queryKey:["addresses"]}),e.invalidateQueries({queryKey:["addresses","default"]}),(0,_.C)({type:"success",message:"Address added successfully!"})},onError:e=>{(0,_.C)({type:"error",message:e.message||"Failed to add address"})}});return{updateAddress:t.mutateAsync,addUserAddress:s.mutateAsync,deleteAddress:r.mutateAsync}}var E=t(2489),Z=t(8041);function k(e){let{form:s,label:t,name:a,type:l="text"}=e,n=s.values[a],i=null==n?"":String(n);return(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-1",children:t}),(0,r.jsx)("input",{name:a,type:l,value:i,onChange:s.handleChange,className:"w-full border rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-emerald-500 ".concat(s.errors[a]?"border-red-300":"border-gray-300")}),s.errors[a]&&(0,r.jsxs)("p",{className:"text-red-600 text-sm flex items-center gap-1 mt-1",children:[(0,r.jsx)(x.Z,{className:"w-4 h-4"}),s.errors[a]]})]})}var D=t(7951);function I(e){let{onClose:s,onSuccess:t}=e,{addUserAddress:l}=S(),[n,i]=(0,a.useState)(!1),o=(0,D.c)({schema:Z.WV,initialValues:{type:"NORMAL",street:"",firstName:"",lastName:"",city:"",state:"",postalCode:"",country:"",isDefault:!1,additionalInfo:"",phoneNumber:"",additionalPhoneNumber:""},onSubmit:async e=>{i(!0);try{await l(e),t(),s()}finally{i(!1)}}});return(0,r.jsx)("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:(0,r.jsxs)("div",{className:"bg-white w-full max-w-2xl rounded-xl p-6 space-y-4 max-h-[90vh] overflow-y-auto",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold",children:"Add New Address"}),(0,r.jsx)("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,r.jsx)(E.Z,{className:"w-5 h-5"})})]}),(0,r.jsxs)("form",{onSubmit:o.handleSubmit,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Address Type"}),(0,r.jsxs)("select",{name:"type",value:o.values.type,onChange:o.handleChange,className:"w-full border rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-emerald-500 ".concat(o.errors.type?"border-red-300":"border-gray-300"),children:[(0,r.jsx)("option",{value:"NORMAL",children:"Normal"}),(0,r.jsx)("option",{value:"BILLING",children:"Billing"}),(0,r.jsx)("option",{value:"SHIPPING",children:"Shipping"})]}),o.errors.type&&(0,r.jsxs)("p",{className:"text-red-600 text-sm flex items-center gap-1 mt-1",children:[(0,r.jsx)(x.Z,{className:"w-4 h-4"}),o.errors.type]})]}),(0,r.jsx)("div",{className:"md:col-span-2"})," ",(0,r.jsx)(k,{label:"First Name",name:"firstName",type:"text",form:o}),(0,r.jsx)(k,{label:"Last Name",name:"lastName",type:"text",form:o}),(0,r.jsx)(k,{label:"Street Address",name:"street",type:"text",form:o}),(0,r.jsx)(k,{label:"City",name:"city",type:"text",form:o}),(0,r.jsx)(k,{label:"State/Province",name:"state",type:"text",form:o}),(0,r.jsx)(k,{label:"Postal Code",name:"postalCode",type:"text",form:o}),(0,r.jsx)(k,{label:"Country",name:"country",type:"text",form:o}),(0,r.jsx)(k,{label:"Phone Number",name:"phoneNumber",type:"tel",form:o}),(0,r.jsx)(k,{label:"Additional Phone (Optional)",name:"additionalPhoneNumber",type:"tel",form:o}),(0,r.jsx)(k,{label:"Additional Info (Optional)",name:"additionalInfo",type:"text",form:o}),(0,r.jsxs)("div",{className:"flex items-center gap-2 md:col-span-2",children:[(0,r.jsx)("input",{type:"checkbox",name:"isDefault",checked:o.values.isDefault,onChange:o.handleChange,className:"w-4 h-4 text-emerald-600 border-gray-300 rounded focus:ring-emerald-500"}),(0,r.jsx)("label",{className:"text-sm font-medium cursor-pointer",children:"Set as default address"})]}),(0,r.jsxs)("div",{className:"flex justify-end gap-3 pt-4 border-t md:col-span-2",children:[(0,r.jsx)("button",{type:"button",onClick:s,className:"border border-gray-300 px-4 py-2 rounded-lg hover:bg-gray-50",disabled:o.isSubmitting,children:"Cancel"}),(0,r.jsx)("button",{type:"submit",disabled:o.isSubmitting,className:"bg-emerald-600 text-white px-6 py-2 rounded-lg hover:bg-emerald-700 disabled:opacity-50 disabled:cursor-not-allowed",children:n?"Saving...":"Save Address"})]})]})]})})}var L=t(9345),F=t(6337),O=t(7769),R=t(2208),T=t(9432);function q(e){let{onClose:s,onSuccess:t}=e,{resetPassword:l}=(0,T.T)(),[n,i]=(0,a.useState)(!1),o=(0,D.c)({schema:Z.S4,initialValues:{email:"",token:"",newPassword:"",confirmPassword:""},onSubmit:async e=>{try{await l(e),t(),s()}catch(e){console.error("Login failed:",e)}}});return(0,r.jsx)("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:(0,r.jsx)("form",{onSubmit:o.handleSubmit,className:"space-y-5",children:(0,r.jsxs)("div",{className:"bg-white w-full max-w-md rounded-xl p-6 space-y-5",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold",children:"Reset Password"}),(0,r.jsx)("button",{onClick:s,className:"text-gray-400 hover:text-gray-600",children:(0,r.jsx)(E.Z,{className:"w-5 h-5"})})]}),(0,r.jsx)("div",{children:(0,r.jsx)("p",{className:"text-sm text-gray-600 mb-6",children:"Enter the reset code sent to your email and choose a new password."})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(L.Z,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,r.jsx)("input",{type:"email",name:"email",value:o.values.email,onChange:o.handleChange,placeholder:"you@example.com",className:"w-full pl-12 pr-4 py-3 border rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent ".concat(o.errors.email?"border-red-300":"border-gray-300")})]}),o.errors.email&&(0,r.jsxs)("div",{className:"flex items-center gap-2 mt-2 text-red-600 text-sm",children:[(0,r.jsx)(x.Z,{className:"w-4 h-4"}),(0,r.jsx)("span",{children:o.errors.email})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"OTP Code"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(L.Z,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,r.jsx)("input",{type:"token",name:"token",value:o.values.token,onChange:o.handleChange,placeholder:"otp code",className:"w-full pl-12 pr-4 py-3 border rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent ".concat(o.errors.email?"border-red-300":"border-gray-300")})]}),o.errors.token&&(0,r.jsxs)("div",{className:"flex items-center gap-2 mt-2 text-red-600 text-sm",children:[(0,r.jsx)(x.Z,{className:"w-4 h-4"}),(0,r.jsx)("span",{children:o.errors.token})]})]}),(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"New Password"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(F.Z,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,r.jsx)("input",{type:n?"text":"password",name:"newPassword",value:o.values.newPassword,onChange:o.handleChange,placeholder:"Enter your password",className:"w-full pl-12 pr-12 py-3 border rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent ".concat(o.errors.newPassword?"border-red-300":"border-gray-300")}),(0,r.jsx)("button",{type:"button",onClick:()=>i(!n),className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:n?(0,r.jsx)(O.Z,{className:"w-5 h-5"}):(0,r.jsx)(R.Z,{className:"w-5 h-5"})})]}),o.errors.newPassword&&(0,r.jsxs)("div",{className:"flex items-center gap-2 mt-2 text-red-600 text-sm",children:[(0,r.jsx)(x.Z,{className:"w-4 h-4"}),(0,r.jsx)("span",{children:o.errors.newPassword})]}),(0,r.jsx)("button",{type:"submit",disabled:o.isSubmitting,className:"w-full bg-emerald-600 text-white py-3 rounded-lg font-semibold hover:bg-emerald-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:o.isSubmitting?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Changing Password..."]}):"Change Password"})]})})})}function U(e){let{address:s,onClose:t,onSuccess:a}=e,{updateAddress:l}=S(),n=(0,D.c)({schema:Z.WV,initialValues:{type:s.type||"NORMAL",street:s.street||"",firstName:s.firstName||"",lastName:s.lastName||"",city:s.city||"",state:s.state||"",postalCode:s.postalCode||"",country:s.country||"",isDefault:s.isDefault||!1,additionalInfo:s.additionalInfo||"",phoneNumber:s.phoneNumber||"",additionalPhoneNumber:s.additionalPhoneNumber||""},onSubmit:async e=>{await l({id:s.id,data:e}),a(),t()}});return(0,r.jsx)("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:(0,r.jsxs)("div",{className:"bg-white w-full max-w-2xl rounded-xl p-6 space-y-4 max-h-[90vh] overflow-y-auto",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold",children:"Update Address"}),(0,r.jsx)("button",{onClick:t,className:"text-gray-400 hover:text-gray-600",children:(0,r.jsx)(E.Z,{className:"w-5 h-5"})})]}),(0,r.jsxs)("form",{onSubmit:n.handleSubmit,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Address Type"}),(0,r.jsxs)("select",{name:"type",value:n.values.type||"",onChange:n.handleChange,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-emerald-500",children:[(0,r.jsx)("option",{value:"NORMAL",children:"Normal"}),(0,r.jsx)("option",{value:"BILLING",children:"Billing"}),(0,r.jsx)("option",{value:"SHIPPING",children:"Shipping"})]}),n.errors.type&&(0,r.jsxs)("p",{className:"text-red-600 text-sm flex items-center gap-1 mt-1",children:[(0,r.jsx)(x.Z,{className:"w-4 h-4"}),n.errors.type]})]}),(0,r.jsx)("div",{className:"md:col-span-2"}),(0,r.jsx)(k,{form:n,label:"First Name",name:"firstName"}),(0,r.jsx)(k,{form:n,label:"Last Name",name:"lastName"}),(0,r.jsx)(k,{form:n,label:"Street Address",name:"street"}),(0,r.jsx)(k,{form:n,label:"City",name:"city"}),(0,r.jsx)(k,{form:n,label:"State/Province",name:"state"}),(0,r.jsx)(k,{form:n,label:"Postal Code",name:"postalCode"}),(0,r.jsx)(k,{form:n,label:"Country",name:"country"}),(0,r.jsx)(k,{form:n,label:"Phone Number",name:"phoneNumber",type:"tel"}),(0,r.jsx)(k,{form:n,label:"Additional Phone (Optional)",name:"additionalPhoneNumber",type:"tel"}),(0,r.jsx)(k,{form:n,label:"Additional Info (Optional)",name:"additionalInfo"}),(0,r.jsxs)("div",{className:"flex items-center gap-2 md:col-span-2",children:[(0,r.jsx)("input",{type:"checkbox",name:"isDefault",checked:n.values.isDefault,onChange:n.handleChange,className:"w-4 h-4 text-emerald-600 border-gray-300 rounded focus:ring-emerald-500"}),(0,r.jsx)("label",{className:"text-sm font-medium cursor-pointer",children:"Set as default address"})]}),(0,r.jsxs)("div",{className:"flex justify-end gap-3 pt-4 border-t md:col-span-2",children:[(0,r.jsx)("button",{type:"button",onClick:t,className:"border border-gray-300 px-4 py-2 rounded-lg hover:bg-gray-50",disabled:n.isSubmitting,children:"Cancel"}),(0,r.jsx)("button",{type:"submit",disabled:n.isSubmitting,className:"bg-emerald-600 text-white px-6 py-2 rounded-lg hover:bg-emerald-700 disabled:opacity-50",children:n.isSubmitting?"Saving...":"Update Address"})]})]})]})})}var M=t(5846),B=t(4400),V=t(605);function G(e){let{currentPage:s,totalPages:t,onPageChange:a}=e;return t<=1?null:(0,r.jsxs)("div",{className:"flex items-center justify-center gap-1 px-6 py-4 bg-gray-50 border-t border-gray-200",children:[(0,r.jsx)("button",{onClick:()=>a(s-1),disabled:1===s,className:"p-1.5 rounded-md text-gray-600 hover:bg-gray-200 disabled:opacity-30 disabled:cursor-not-allowed transition-colors",children:(0,r.jsx)(i.Z,{className:"w-4 h-4"})}),(()=>{let e=[];if(t<=7){for(let s=1;s<=t;s++)e.push(s);return e}e.push(1),s>3&&e.push("...");let r=Math.max(2,s-1),a=Math.min(t-1,s+1);for(let s=r;s<=a;s++)e.push(s);return s<t-2&&e.push("..."),e.push(t),e})().map((e,t)=>"..."===e?(0,r.jsx)("span",{className:"px-2 text-gray-400 text-sm select-none",children:"…"},"ellipsis-".concat(t)):(0,r.jsx)("button",{onClick:()=>a(e),className:"w-8 h-8 rounded-md text-sm font-medium transition-colors ".concat(s===e?"bg-emerald-600 text-white":"text-gray-600 hover:bg-gray-200"),children:e},e)),(0,r.jsx)("button",{onClick:()=>a(s+1),disabled:s===t,className:"p-1.5 rounded-md text-gray-600 hover:bg-gray-200 disabled:opacity-30 disabled:cursor-not-allowed transition-colors",children:(0,r.jsx)(o.Z,{className:"w-4 h-4"})})]})}let K={pending_quote:{label:"Pending Quote",color:"bg-yellow-100 text-yellow-700",icon:d.Z},PENDING_QUOTE:{label:"Pending Quote",color:"bg-yellow-100 text-yellow-700",icon:d.Z},quote_sent:{label:"Quote Sent",color:"bg-blue-100 text-blue-700",icon:c.Z},QUOTE_SENT:{label:"Quote Sent",color:"bg-blue-100 text-blue-700",icon:c.Z},deposit_pending:{label:"Deposit Pending",color:"bg-orange-100 text-orange-700",icon:m.Z},DEPOSIT_PENDING:{label:"Deposit Pending",color:"bg-orange-100 text-orange-700",icon:m.Z},deposit_paid:{label:"Deposit Paid",color:"bg-green-100 text-green-700",icon:u.Z},DEPOSIT_PAID:{label:"Deposit Paid",color:"bg-green-100 text-green-700",icon:u.Z},balance_paid:{label:"Balance Paid",color:"bg-green-100 text-green-700",icon:u.Z},BALANCE_PAID:{label:"Balance Paid",color:"bg-green-100 text-green-700",icon:u.Z},inspection_pending:{label:"Inspection Pending",color:"bg-yellow-100 text-yellow-700",icon:c.Z},INSPECTION_PENDING:{label:"Inspection Pending",color:"bg-yellow-100 text-yellow-700",icon:c.Z},inspection_complete:{label:"Inspection Complete",color:"bg-blue-100 text-blue-700",icon:u.Z},INSPECTION_COMPLETE:{label:"Inspection Complete",color:"bg-blue-100 text-blue-700",icon:u.Z},awaiting_approval:{label:"Awaiting Approval",color:"bg-orange-100 text-orange-700",icon:x.Z},AWAITING_APPROVAL:{label:"Awaiting Approval",color:"bg-orange-100 text-orange-700",icon:x.Z},approved:{label:"Approved",color:"bg-green-100 text-green-700",icon:u.Z},APPROVED:{label:"Approved",color:"bg-green-100 text-green-700",icon:u.Z},purchase_in_progress:{label:"Purchasing",color:"bg-blue-100 text-blue-700",icon:g.Z},PURCHASE_IN_PROGRESS:{label:"Purchasing",color:"bg-blue-100 text-blue-700",icon:g.Z},purchased:{label:"Purchased",color:"bg-green-100 text-green-700",icon:u.Z},PURCHASED:{label:"Purchased",color:"bg-green-100 text-green-700",icon:u.Z},export_pending:{label:"Export Pending",color:"bg-yellow-100 text-yellow-700",icon:g.Z},EXPORT_PENDING:{label:"Export Pending",color:"bg-yellow-100 text-yellow-700",icon:g.Z},shipped:{label:"Shipped",color:"bg-blue-100 text-blue-700",icon:h.Z},SHIPPED:{label:"Shipped",color:"bg-blue-100 text-blue-700",icon:h.Z},in_transit:{label:"In Transit",color:"bg-blue-100 text-blue-700",icon:h.Z},IN_TRANSIT:{label:"In Transit",color:"bg-blue-100 text-blue-700",icon:h.Z},arrived_port:{label:"Arrived at Port",color:"bg-green-100 text-green-700",icon:p.Z},ARRIVED_PORT:{label:"Arrived at Port",color:"bg-green-100 text-green-700",icon:p.Z},customs_clearance:{label:"Customs Clearance",color:"bg-yellow-100 text-yellow-700",icon:c.Z},CUSTOMS_CLEARANCE:{label:"Customs Clearance",color:"bg-yellow-100 text-yellow-700",icon:c.Z},cleared:{label:"Cleared",color:"bg-green-100 text-green-700",icon:u.Z},CLEARED:{label:"Cleared",color:"bg-green-100 text-green-700",icon:u.Z},delivery_scheduled:{label:"Delivery Scheduled",color:"bg-blue-100 text-blue-700",icon:y.Z},DELIVERY_SCHEDULED:{label:"Delivery Scheduled",color:"bg-blue-100 text-blue-700",icon:y.Z},delivered:{label:"Delivered",color:"bg-emerald-100 text-emerald-700",icon:u.Z},DELIVERED:{label:"Delivered",color:"bg-emerald-100 text-emerald-700",icon:u.Z},cancelled:{label:"Cancelled",color:"bg-red-100 text-red-700",icon:x.Z},CANCELLED:{label:"Cancelled",color:"bg-red-100 text-red-700",icon:x.Z},refunded:{label:"Refunded",color:"bg-gray-100 text-gray-700",icon:m.Z},REFUNDED:{label:"Refunded",color:"bg-gray-100 text-gray-700",icon:m.Z}};function Q(){var e,s;(0,n.useRouter)();let{data:t,status:i}=(0,V.useSession)(),c=null==t?void 0:t.accessToken,g=null==t?void 0:t.user,{deleteAddress:p}=S(),[y,j]=(0,a.useState)("requests"),[w,C]=(0,a.useState)(!1),[E,Z]=(0,a.useState)(!1),[k,D]=(0,a.useState)(!1),[L,F]=(0,a.useState)(!1),[O,R]=(0,a.useState)(!1),[Q,Y]=(0,a.useState)(!1),[X,J]=(0,a.useState)(null),[$,ee]=(0,a.useState)(1),[es,et]=(0,a.useState)(1),{defaultAddresses:er,isLoading:ea,isError:el,isNotFound:en}=function(){var e;let{data:s,isLoading:t,isError:r,error:a,refetch:l}=(0,P.a)({queryKey:["addresses","default"],queryFn:async()=>{var e,s;try{let s=await A.getDefualtAllAddress(),t=null==s?void 0:null===(e=s.data)||void 0===e?void 0:e.data;return t?[t]:[]}catch(e){if((null==e?void 0:e.status)===404||(null==e?void 0:null===(s=e.response)||void 0===s?void 0:s.status)===404)return[];throw e}},retry:(e,s)=>{var t;return(null==s?void 0:s.status)!==404&&(null==s?void 0:null===(t=s.response)||void 0===t?void 0:t.status)!==404&&e<1}}),n=a&&((null==a?void 0:a.status)===404||(null==a?void 0:null===(e=a.response)||void 0===e?void 0:e.status)===404);return{defaultAddresses:s||[],isLoading:t,isError:r&&!n,isNotFound:n,error:a,refetch:l}}(),{addresses:ei,isLoading:eo,isError:ed,refetch:ec}=function(){let{data:e,isLoading:s,isError:t,refetch:r}=(0,P.a)({queryKey:["addresses"],queryFn:async()=>{var e;let s=await A.getAllAddresses();return(null==s?void 0:null===(e=s.data)||void 0===e?void 0:e.data)||[]},retry:1});return{addresses:e||[],isLoading:s,isError:t,refetch:r}}(),{orders:em,isLoading:eu,isError:ex}=(0,M.yi)(),{payments:eg,isLoading:eh,isError:ep,refetch:ey}=function(){var e;let s=(0,P.a)({queryKey:["payments"],queryFn:async()=>(await B.S.getAllPayments()).data.data.data,staleTime:3e5,refetchOnWindowFocus:!1});return{payments:null!==(e=s.data)&&void 0!==e?e:[],isLoading:s.isLoading,isError:s.isError,error:s.error,refetch:s.refetch}}(),{forgotPassword:eb}=(0,T.T)(),ef=(0,a.useMemo)(()=>{var e,s;return Array.isArray(er)&&0!==er.length&&null!==(s=null===(e=er[0])||void 0===e?void 0:e.data)&&void 0!==s?s:null},[er]),ev=Array.isArray(ei)?ei.filter(e=>e.id!==(null==ef?void 0:ef.id)):[],eN=(0,a.useMemo)(()=>Array.isArray(em)?[...em].sort((e,s)=>new Date(s.createdAt).getTime()-new Date(e.createdAt).getTime()):[],[em]),ej=Math.ceil(eN.length/10),ew=(0,a.useMemo)(()=>{let e=($-1)*10;return eN.slice(e,e+10)},[eN,$]),eP=(0,a.useMemo)(()=>Array.isArray(eg)?[...eg].sort((e,s)=>new Date(s.createdAt).getTime()-new Date(e.createdAt).getTime()):[],[eg]),eC=Math.ceil(eP.length/10),eA=(0,a.useMemo)(()=>{let e=(es-1)*10;return eP.slice(e,e+10)},[eP,es]),e_=async()=>{if(null==t?void 0:t.user.email)try{var e;Z(!0),await eb({email:null==t?void 0:null===(e=t.user)||void 0===e?void 0:e.email}),C(!1),F(!0)}finally{Z(!1)}},eS=e=>{J(e),R(!0)},eE=e=>{J(e),Y(!0)};if("loading"===i)return(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"w-16 h-16 border-4 border-emerald-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Loading dashboard..."})]})});if(!c)return null;let eZ=(null==eg?void 0:eg.filter(e=>"FULL_PAYMENT"===e.paymentType||"DEPOSIT"===e.paymentType).reduce((e,s)=>{var t,r;return e+((null===(r=s.metadata)||void 0===r?void 0:null===(t=r.calculation)||void 0===t?void 0:t.paymentAmount)||0)},0))||0,ek=[{label:"Active Orders",value:em.filter(e=>{var s;return!["delivered","cancelled","refunded"].includes(null===(s=e.status)||void 0===s?void 0:s.toLowerCase())}).length,icon:b.Z,color:"bg-blue-500"},{label:"In Transit",value:em.filter(e=>{var s;return["shipped","in_transit"].includes(null===(s=e.status)||void 0===s?void 0:s.toLowerCase())}).length,icon:h.Z,color:"bg-emerald-500"},{label:"Delivered",value:em.filter(e=>{var s;return(null===(s=e.status)||void 0===s?void 0:s.toLowerCase())==="delivered"}).length,icon:u.Z,color:"bg-green-500"},{label:"Total Spent",value:(0,N.xG)(eZ),icon:m.Z,color:"bg-gray-500"}];return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,r.jsx)("div",{className:"bg-gradient-to-r from-gray-900 to-emerald-900 py-8",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 flex justify-between items-center",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("h1",{className:"text-2xl font-bold text-white",children:["Welcome back, ",(null==g?void 0:null===(e=g.profile)||void 0===e?void 0:e.firstName)||(null==g?void 0:g.email.split("@")[0])]}),(0,r.jsx)("p",{className:"text-gray-300 mt-1",children:"Manage your vehicle imports"})]}),(0,r.jsx)(l.default,{href:"/marketplace",className:"bg-emerald-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-emerald-500",children:"Browse Vehicles"})]})}),(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 -mt-4 grid grid-cols-2 md:grid-cols-4 gap-4",children:ek.map((e,s)=>(0,r.jsxs)("div",{className:"bg-white rounded-xl p-4 shadow-sm flex items-center gap-3",children:[(0,r.jsx)("div",{className:"".concat(e.color," p-2 rounded-lg"),children:(0,r.jsx)(e.icon,{className:"w-5 h-5 text-white"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-2xl font-bold",children:e.value}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:e.label})]})]},s))}),(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,r.jsx)("div",{className:"flex gap-4 mb-6 border-b border-gray-200 overflow-x-auto",children:[{id:"requests",label:"My Requests",icon:b.Z},{id:"payments",label:"Payments",icon:m.Z},{id:"saved",label:"Saved",icon:f.Z},{id:"profile",label:"Profile",icon:v.Z}].map(e=>(0,r.jsxs)("button",{onClick:()=>j(e.id),className:"flex items-center gap-2 px-4 py-3 border-b-2 font-medium whitespace-nowrap transition-colors ".concat(y===e.id?"border-emerald-600 text-emerald-600":"border-transparent text-gray-500 hover:text-gray-700"),children:[(0,r.jsx)(e.icon,{className:"w-5 h-5"}),e.label]},e.id))}),"requests"===y&&(0,r.jsx)("div",{className:"space-y-4",children:ex?(0,r.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-xl p-6",children:(0,r.jsxs)("div",{className:"flex items-start gap-3",children:[(0,r.jsx)(x.Z,{className:"w-5 h-5 text-red-600 mt-0.5"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-red-900 font-medium",children:"Failed to load orders"}),(0,r.jsx)("p",{className:"text-red-700 text-sm mt-1",children:"Please try refreshing the page."})]})]})}):0===eN.length?(0,r.jsxs)("div",{className:"bg-white rounded-xl p-12 text-center",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,r.jsx)(b.Z,{className:"w-8 h-8 text-gray-400"})}),(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No orders yet"}),(0,r.jsx)("p",{className:"text-gray-600 mb-4",children:"Start browsing vehicles to make your first import request."}),(0,r.jsxs)(l.default,{href:"/marketplace",className:"inline-flex items-center gap-2 bg-emerald-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-emerald-700 transition-colors",children:["Browse Vehicles",(0,r.jsx)(o.Z,{className:"w-4 h-4"})]})]}):(0,r.jsxs)(r.Fragment,{children:[ew.map(e=>{var s,t,a,n,i,c,m,u,x,g,h,p,y;let b=K[e.status],f=(null==b?void 0:b.icon)||d.Z,v=function(e){let s=e.vehicleSnapshot,t=e.vehicle;return(null==s?void 0:s.year)&&(null==s?void 0:s.make)&&(null==s?void 0:s.model)?"".concat(s.year," ").concat(s.make," ").concat(s.model):(null==t?void 0:t.year)&&(null==t?void 0:t.make)&&(null==t?void 0:t.model)?"".concat(t.year," ").concat(t.make," ").concat(t.model):e.requestNumber||"Order #".concat(e.id)}(e),j=(null===(m=(a=e).vehicleSnapshot)||void 0===m?void 0:null===(c=m.apiData)||void 0===c?void 0:null===(i=c.listing)||void 0===i?void 0:null===(n=i.retailListing)||void 0===n?void 0:n.primaryImage)||(null===(h=a.vehicleSnapshot)||void 0===h?void 0:null===(g=h.apiData)||void 0===g?void 0:null===(x=g.listing)||void 0===x?void 0:null===(u=x.wholesaleListing)||void 0===u?void 0:u.primaryImage)||((null===(p=a.vehicleSnapshot)||void 0===p?void 0:p.images)&&a.vehicleSnapshot.images.length>0?a.vehicleSnapshot.images[0]:(null===(y=a.vehicle)||void 0===y?void 0:y.images)&&a.vehicle.images.length>0?a.vehicle.images[0]:"https://images.pexels.com/photos/170811/pexels-photo-170811.jpeg?auto=compress&cs=tinysrgb&w=800");return(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:[(0,r.jsx)("div",{className:"p-6",children:(0,r.jsxs)("div",{className:"flex flex-col md:flex-row gap-6",children:[(0,r.jsx)("img",{src:j,alt:v,className:"w-full md:w-48 h-32 object-cover rounded-lg"}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex flex-wrap items-start justify-between gap-4 mb-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{className:"text-sm text-gray-500 mb-1",children:["Order #",e.requestNumber||e.id]}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-900",children:v})]}),(0,r.jsxs)("span",{className:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full text-sm font-medium ".concat((null==b?void 0:b.color)||"bg-gray-100 text-gray-700"),children:[(0,r.jsx)(f,{className:"w-4 h-4"}),(null==b?void 0:b.label)||e.status]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-gray-500",children:"Total Cost"}),(0,r.jsx)("p",{className:"font-semibold text-gray-900",children:(0,N.xG)((null===(s=e.paymentBreakdown)||void 0===s?void 0:s.totalUsd)||e.totalLandedCostUsd||e.quotedPriceUsd||(null===(t=e.vehicleSnapshot)||void 0===t?void 0:t.priceUsd)||0)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-gray-500",children:"Shipping"}),(0,r.jsx)("p",{className:"font-semibold text-gray-900",children:e.shippingMethod||"N/A"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-gray-500",children:"Destination"}),(0,r.jsx)("p",{className:"font-semibold text-gray-900",children:e.destinationState||"N/A"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-gray-500",children:"Est. Delivery"}),(0,r.jsx)("p",{className:"font-semibold text-gray-900",children:e.estimatedDeliveryDate?(0,N.p6)(e.estimatedDeliveryDate):"TBD"})]})]})]})]})}),(0,r.jsxs)("div",{className:"bg-gray-50 px-6 py-3 flex items-center justify-between",children:[(0,r.jsxs)("p",{className:"text-sm text-gray-500",children:["Submitted ",(0,N.p6)(e.createdAt)]}),(0,r.jsxs)(l.default,{href:"/marketplace/buyer/order/".concat(e.id),className:"text-emerald-600 font-medium text-sm hover:text-emerald-700 flex items-center gap-1",children:["View Details",(0,r.jsx)(o.Z,{className:"w-4 h-4"})]})]})]},e.id)}),(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:[(0,r.jsx)("div",{className:"px-6 py-3 flex items-center justify-between border-t border-gray-100",children:(0,r.jsxs)("p",{className:"text-sm text-gray-500",children:["Showing ",Math.min(($-1)*10+1,eN.length),"–",Math.min(10*$,eN.length)," of ",eN.length," orders"]})}),(0,r.jsx)(G,{currentPage:$,totalPages:ej,onPageChange:ee})]})]})}),"payments"===y&&(0,r.jsx)("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:eh?(0,r.jsxs)("div",{className:"p-12 text-center",children:[(0,r.jsx)("div",{className:"w-16 h-16 border-4 border-emerald-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Loading payments..."})]}):ep?(0,r.jsxs)("div",{className:"p-12 text-center",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,r.jsx)(x.Z,{className:"w-8 h-8 text-red-600"})}),(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Failed to Load Payments"}),(0,r.jsx)("p",{className:"text-gray-600 mb-4",children:"There was an error loading your payment history. Please try again."}),(0,r.jsx)("button",{onClick:()=>ey(),className:"bg-emerald-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-emerald-700",children:"Retry"})]}):0===eP.length?(0,r.jsxs)("div",{className:"p-12 text-center",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,r.jsx)(m.Z,{className:"w-8 h-8 text-gray-400"})}),(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No payments yet"}),(0,r.jsx)("p",{className:"text-gray-600 mb-4",children:"Your payment history will appear here once you make your first payment."}),(0,r.jsxs)(l.default,{href:"/marketplace",className:"inline-flex items-center gap-2 bg-emerald-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-emerald-700 transition-colors",children:["Browse Vehicles",(0,r.jsx)(o.Z,{className:"w-4 h-4"})]})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full",children:[(0,r.jsx)("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),(0,r.jsx)("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Order"}),(0,r.jsx)("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Vehicle"}),(0,r.jsx)("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),(0,r.jsx)("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),(0,r.jsx)("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,r.jsx)("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Reference"})]})}),(0,r.jsx)("tbody",{className:"bg-white divide-y divide-gray-100",children:eA.map(e=>{var s,t,a,n,i,o;let c=null===(s=e.order)||void 0===s?void 0:s.vehicleSnapshot,m=c?"".concat(c.year," ").concat(c.make," ").concat(c.model):"N/A",g=null!==(o=null!==(i=null===(a=e.metadata)||void 0===a?void 0:null===(t=a.calculation)||void 0===t?void 0:t.paymentAmount)&&void 0!==i?i:e.amountUsd)&&void 0!==o?o:0;return(0,r.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors",children:[(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:(0,N.p6)(e.createdAt)}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:e.order?(0,r.jsx)(l.default,{href:"/request-details/".concat(e.orderId),className:"text-emerald-600 hover:text-emerald-700 font-medium",children:e.order.requestNumber}):(0,r.jsx)("span",{className:"text-gray-500",children:"-"})}),(0,r.jsx)("td",{className:"px-6 py-4 text-sm text-gray-900",children:(0,r.jsxs)("div",{className:"max-w-xs",children:[(0,r.jsx)("p",{className:"truncate font-medium",children:m}),(null==c?void 0:c.vin)&&(0,r.jsxs)("p",{className:"text-xs text-gray-500 truncate",children:["VIN: ",c.vin]})]})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:(0,r.jsx)("span",{className:"capitalize",children:(null===(n=e.paymentType)||void 0===n?void 0:n.replace(/_/g," ").toLowerCase())||"N/A"})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:(0,N.xG)(g)}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsxs)("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium ".concat("COMPLETED"===e.status?"bg-green-100 text-green-700":"PENDING"===e.status?"bg-yellow-100 text-yellow-700":"FAILED"===e.status?"bg-red-100 text-red-700":"bg-gray-100 text-gray-700"),children:["COMPLETED"===e.status&&(0,r.jsx)(u.Z,{className:"w-3 h-3 mr-1"}),"PENDING"===e.status&&(0,r.jsx)(d.Z,{className:"w-3 h-3 mr-1"}),"FAILED"===e.status&&(0,r.jsx)(x.Z,{className:"w-3 h-3 mr-1"}),e.status]})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(0,r.jsxs)("div",{className:"max-w-xs",children:[(0,r.jsx)("p",{className:"font-mono text-xs truncate",children:e.transactionRef||e.providerTransactionId||"-"}),e.paymentProvider&&(0,r.jsx)("p",{className:"text-xs text-gray-400 capitalize",children:e.paymentProvider})]})})]},e.id)})})]})}),(0,r.jsx)("div",{className:"px-6 py-3 bg-gray-50 border-t border-gray-200 flex items-center justify-between",children:(0,r.jsxs)("p",{className:"text-sm text-gray-500",children:["Showing ",Math.min((es-1)*10+1,eP.length),"–",Math.min(10*es,eP.length)," of ",eP.length," ",1===eP.length?"payment":"payments"]})}),(0,r.jsx)(G,{currentPage:es,totalPages:eC,onPageChange:et})]})}),"saved"===y&&(0,r.jsxs)("div",{className:"bg-white rounded-xl p-12 text-center",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,r.jsx)(f.Z,{className:"w-8 h-8 text-gray-400"})}),(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No saved vehicles"}),(0,r.jsx)("p",{className:"text-gray-600 mb-4",children:"Save vehicles you're interested in to view them later."}),(0,r.jsx)(l.default,{href:"/marketplace",className:"inline-flex items-center gap-2 bg-emerald-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-emerald-700 transition-colors",children:"Browse Vehicles"})]}),"profile"===y&&(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-8 bg-white rounded-xl shadow-sm mt-6",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-6",children:"Profile Information"}),(0,r.jsxs)("div",{className:"flex gap-4",children:[(0,r.jsx)("button",{onClick:()=>C(!0),className:"text-emerald-600 font-medium hover:underline",children:"Change Password"}),(0,r.jsx)("button",{onClick:()=>D(!0),className:"text-emerald-600 font-medium hover:underline",children:"Add Address"})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Profile Information"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name"}),(0,r.jsx)("input",{type:"text",value:(null==g?void 0:null===(s=g.profile)||void 0===s?void 0:s.firstName)||"",readOnly:!0,className:"w-full border border-gray-300 rounded-lg px-4 py-3 bg-gray-50"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),(0,r.jsx)("input",{type:"email",value:(null==g?void 0:g.email)||"",readOnly:!0,className:"w-full border border-gray-300 rounded-lg px-4 py-3 bg-gray-50"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone"}),(0,r.jsx)("input",{type:"tel",value:(null==g?void 0:g.phone)||"",readOnly:!0,className:"w-full border border-gray-300 rounded-lg px-4 py-3 bg-gray-50"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Country"}),(0,r.jsx)("input",{type:"text",value:(null==g?void 0:g.country)||"Nigeria",readOnly:!0,className:"w-full border border-gray-300 rounded-lg px-4 py-3 bg-gray-50"})]})]})]}),(0,r.jsxs)("div",{className:"mt-10",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Default Address"}),ea?(0,r.jsxs)("div",{className:"flex items-center gap-2 text-gray-500",children:[(0,r.jsx)("div",{className:"w-4 h-4 border-2 border-emerald-600 border-t-transparent rounded-full animate-spin"}),(0,r.jsx)("p",{children:"Loading default address..."})]}):el&&!en?(0,r.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,r.jsx)("p",{className:"text-red-600",children:"Failed to load default address. Please try again."})}):ef?(0,r.jsx)("div",{className:"max-w-md",children:(0,r.jsx)(z,{addr:ef,onEdit:eS,onDelete:eE})}):(0,r.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:(0,r.jsxs)("div",{className:"flex items-start gap-3",children:[(0,r.jsx)(x.Z,{className:"w-5 h-5 text-blue-600 mt-0.5"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-blue-900 font-medium mb-1",children:"No default address set"}),(0,r.jsx)("p",{className:"text-blue-700 text-sm mb-3",children:"Set a default address to speed up your checkout process and vehicle deliveries."}),(0,r.jsx)("button",{onClick:()=>D(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-blue-700 transition-colors",children:"Add Default Address"})]})]})})]}),(0,r.jsxs)("div",{className:"mt-10",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold",children:"Other Saved Addresses"}),(0,r.jsxs)("span",{className:"text-sm text-gray-500",children:[ev.length," ",1===ev.length?"address":"addresses"]})]}),eo?(0,r.jsxs)("div",{className:"flex items-center gap-2 text-gray-500",children:[(0,r.jsx)("div",{className:"w-4 h-4 border-2 border-emerald-600 border-t-transparent rounded-full animate-spin"}),(0,r.jsx)("p",{children:"Loading addresses..."})]}):ed?(0,r.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,r.jsx)("p",{className:"text-red-600",children:"Failed to load addresses. Please try again."})}):0===ev.length?(0,r.jsx)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-6 text-center",children:(0,r.jsx)("p",{className:"text-gray-600",children:"No additional addresses saved."})}):(0,r.jsx)("div",{className:"grid md:grid-cols-2 gap-4",children:ev.map(e=>(0,r.jsx)(z,{addr:e,onEdit:eS,onDelete:eE},e.id))})]})]})]})]}),w&&(0,r.jsx)(W,{loading:E,onClose:()=>C(!1),onConfirm:e_}),L&&(0,r.jsx)(q,{onClose:()=>F(!1),onSuccess:()=>F(!1)}),k&&(0,r.jsx)(I,{onClose:()=>D(!1),onSuccess:ec}),O&&X&&(0,r.jsx)(U,{address:X,onClose:()=>{R(!1),J(null)},onSuccess:ec}),Q&&X&&(0,r.jsx)(H,{loading:!1,address:X,onClose:()=>{Y(!1),J(null)},onConfirm:async()=>{if(!(null==X?void 0:X.id)){console.error("No address ID found!"),(0,_.C)({type:"error",message:"Error: No address ID found"});return}try{await p({id:X.id}),ec(),Y(!1),J(null)}catch(e){console.error("Delete failed:",e),(0,_.C)({type:"error",message:"Failed to delete address"})}}})]})}function H(e){let{loading:s,onClose:t,onConfirm:a,address:l}=e;return(0,r.jsx)("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-xl w-full max-w-md p-6 shadow-lg",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Delete Address"}),(0,r.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Are you sure you want to delete this address?"}),l&&(0,r.jsxs)("div",{className:"bg-gray-50 p-3 rounded-lg mb-4 text-sm",children:[(0,r.jsxs)("p",{className:"font-medium",children:[l.firstName," ",l.lastName]}),(0,r.jsx)("p",{className:"text-gray-600",children:l.street}),(0,r.jsxs)("p",{className:"text-gray-600",children:[l.city,", ",l.state]})]}),(0,r.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,r.jsx)("button",{onClick:t,className:"border px-4 py-2 rounded-lg",children:"Cancel"}),(0,r.jsx)("button",{onClick:a,disabled:s,className:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700",children:s?"Deleting...":"Yes, Delete"})]})]})})}function W(e){let{loading:s,onClose:t,onConfirm:a}=e;return(0,r.jsx)("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-xl w-full max-w-md p-6 shadow-lg",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Change Password"}),(0,r.jsx)("p",{className:"text-sm text-gray-600 mb-6",children:"A reset link will be sent to your email."}),(0,r.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,r.jsx)("button",{onClick:t,className:"border px-4 py-2 rounded-lg",children:"Cancel"}),(0,r.jsx)("button",{onClick:a,disabled:s,className:"bg-emerald-600 text-white px-4 py-2 rounded-lg",children:s?"Sending...":"Yes, Continue"})]})]})})}function z(e){let{addr:s,onEdit:t,onDelete:a}=e;return(0,r.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,r.jsxs)("p",{className:"font-semibold",children:[s.firstName," ",s.lastName]}),(0,r.jsx)("p",{children:s.street}),(0,r.jsxs)("p",{children:[s.city,", ",s.state," ",s.postalCode]}),(0,r.jsx)("p",{children:s.country}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:s.phoneNumber}),(0,r.jsxs)("div",{className:"flex gap-4 mt-3",children:[(0,r.jsx)("button",{onClick:()=>t(s),className:"text-emerald-600 text-sm font-medium hover:underline",children:"Update"}),(0,r.jsx)("button",{onClick:()=>a(s),className:"text-red-600 text-sm font-medium hover:underline",children:"Delete"})]}),s.isDefault&&(0,r.jsx)("span",{className:"text-xs bg-emerald-100 text-emerald-700 px-2 py-1 rounded mt-2 inline-block",children:"Default"})]})}}},function(e){e.O(0,[451,605,21,464,799,830,713,873,971,117,744],function(){return e(e.s=1503)}),_N_E=e.O()}]);