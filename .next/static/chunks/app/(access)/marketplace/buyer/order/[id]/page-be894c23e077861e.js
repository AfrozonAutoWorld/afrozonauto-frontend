(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[634],{8312:function(e,s,t){Promise.resolve().then(t.bind(t,9011))},5846:function(e,s,t){"use strict";t.d(s,{Aj:function(){return n},j4:function(){return i},yi:function(){return l}});var a=t(1713),r=t(8118);function l(){var e,s,t,l,n,i,d,o,c,m;let x=(0,a.a)({queryKey:["orders"],queryFn:async()=>(await r.k.getAllOrder()).data.data.data,staleTime:3e5,refetchOnWindowFocus:!1});return{orders:null!==(i=null===(e=x.data)||void 0===e?void 0:e.orders)&&void 0!==i?i:[],total:null!==(d=null===(s=x.data)||void 0===s?void 0:s.total)&&void 0!==d?d:0,page:null!==(o=null===(t=x.data)||void 0===t?void 0:t.page)&&void 0!==o?o:1,limit:null!==(c=null===(l=x.data)||void 0===l?void 0:l.limit)&&void 0!==c?c:10,totalPages:null!==(m=null===(n=x.data)||void 0===n?void 0:n.totalPages)&&void 0!==m?m:1,isLoading:x.isLoading,isError:x.isError,error:x.error,refetch:x.refetch}}function n(e){let s=(0,a.a)({queryKey:["orders",e],queryFn:async()=>(await r.k.getOrderById(e)).data.data.data,enabled:!!e,staleTime:3e5,refetchOnWindowFocus:!1});return{order:s.data,isLoading:s.isLoading,isError:s.isError,error:s.error,refetch:s.refetch}}function i(e,s){let t=(0,a.a)({queryKey:["orders","costBreakdown",e,s],queryFn:async()=>(await r.k.getPredefinePrices(e,s)).data.data.data,enabled:!!e&&!!s,staleTime:3e5,refetchOnWindowFocus:!1});return{costBreakdown:t.data,isLoading:t.isLoading,isError:t.isError,error:t.error}}},4755:function(e,s,t){"use strict";t.d(s,{E:function(){return i},r:function(){return d}});var a=t(9827),r=t(1770),l=t(4400),n=t(999);function i(){return(0,a.NL)(),(0,r.D)({mutationFn:async e=>(await l.S.paymentInit(e)).data.data.data,onSuccess:e=>{(0,n.C)({type:"success",message:"Payment initialized successfully!"}),e.authorizationUrl&&(window.location.href=e.authorizationUrl)},onError:e=>{(0,n.C)({type:"error",message:e.message||"Failed to initialize payment"})}})}function d(){let e=(0,a.NL)();return(0,r.D)({mutationFn:async e=>{let{reference:s}=e;return(await l.S.paymentVerify(s)).data.data.data},onSuccess:s=>{let{success:t,message:a}=s;e.invalidateQueries({queryKey:["orders"]}),e.invalidateQueries({queryKey:["payments"]}),(0,n.C)({type:t?"success":"error",message:a||(t?"Payment verified successfully!":"Payment verification failed")})},onError:e=>{(0,n.C)({type:"error",message:e.message||"Failed to verify payment"})}})}},6305:function(e,s,t){"use strict";t.d(s,{x:function(){return n}});var a=t(3464),r=t(605),l=t(257);let n=a.Z.create({baseURL:l.env.NEXT_PUBLIC_API_URL||"https://afrozonauto-backend.onrender.com/api",headers:{"Content-Type":"application/json"}});n.interceptors.request.use(async e=>{let s=await (0,r.getSession)(),t=null==s?void 0:s.accessToken;return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),n.interceptors.response.use(e=>e,e=>{var s;return(null===(s=e.response)||void 0===s?void 0:s.status)===401&&(window.location.href="/login"),Promise.reject(e)})},8118:function(e,s,t){"use strict";t.d(s,{k:function(){return r}});var a=t(6305);let r={getAllOrder:async()=>a.x.get("/orders/my-orders"),requestVehicle:async e=>a.x.post("/orders",e),getOrderById:async e=>a.x.get("/orders/".concat(e)),getPredefinePrices:async(e,s)=>a.x.get("/orders/order-summary/".concat(e,"/?shippingMethod=").concat(s))}},4400:function(e,s,t){"use strict";t.d(s,{S:function(){return r}});var a=t(6305);let r={getAllPayments:()=>a.x.get("/payments/all"),getCurrentUserPayment:()=>a.x.get("/payments/user-mine"),getPaymentById:e=>a.x.get("/payments/payment-id/".concat(e)),paymentInit:e=>a.x.post("/payments/init",e),paymentVerify:e=>a.x.patch("/payments/verify/".concat(e,"?provider=paystack"),{})}},8135:function(e,s,t){"use strict";t.d(s,{LI:function(){return o},X:function(){return i},p6:function(){return d},qA:function(){return l},xG:function(){return n},yG:function(){return c}});let a={sourcing_fee_percent:5,sourcing_fee_min_usd:500,inspection_fee_usd:150,us_handling_fee_usd:350,shipping_roro_base_usd:1800,shipping_container_base_usd:2500,exchange_rate_ngn_usd:1550,timeline_days_roro:45,timeline_days_container:60},r={CAR:1,SEDAN:1,COUPE:1,HATCHBACK:1,WAGON:1.05,CONVERTIBLE:1.05,SUV:1.15,TRUCK:1.25,VAN:1.2,MOTORCYCLE:0};function l(e,s,t){let l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:a,n=r[s]||1,i=Math.max(l.sourcing_fee_percent/100*e,l.sourcing_fee_min_usd),d=l.inspection_fee_usd,o=l.us_handling_fee_usd,c=("RORO"===t?l.shipping_roro_base_usd:l.shipping_container_base_usd)*n,m=e+i+d+o+c,x=m*l.exchange_rate_ngn_usd;return{breakdown:{vehicle_price:e,sourcing_fee:i,inspection_fee:d,us_handling_fee:o,shipping_cost:c,total_usd:m,total_ngn:x,exchange_rate:l.exchange_rate_ngn_usd},estimatedDeliveryDays:"RORO"===t?l.timeline_days_roro:l.timeline_days_container,depositAmount:.3*m}}function n(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"USD";return"NGN"===s?new Intl.NumberFormat("en-NG",{style:"currency",currency:"NGN",minimumFractionDigits:0,maximumFractionDigits:0}).format(e):new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(e)}function i(e){let s=new Date;return s.setDate(s.getDate()+e),s}function d(e){return("string"==typeof e?new Date(e):e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}let o=["Lagos","Abuja","Port Harcourt","Kano","Ibadan","Enugu","Kaduna","Benin City","Warri","Calabar","Aba","Jos","Ilorin","Onitsha","Abeokuta","Uyo","Owerri","Akure","Bauchi","Sokoto"],c=["Toyota","Honda","Ford","Chevrolet","BMW","Mercedes-Benz","Lexus","Nissan","Hyundai","Kia","Mazda","Volkswagen","Audi","Subaru","Jeep","Dodge","Ram","GMC","Acura","Infiniti","Cadillac","Lincoln","Volvo","Land Rover","Porsche"]},999:function(e,s,t){"use strict";t.d(s,{C:function(){return r}});var a=t(4438);let r=e=>{let{type:s,message:t,duration:r=2e3,position:l="top-center"}=e,n={color:"#fff"},i={success:"#4CAF50",error:"#FF5722",info:"#2196F3",warning:"#FFC107"};switch(a.A.dismiss(),s){case"success":a.A.success(t,{duration:r,style:{...n,backgroundColor:i.success},position:l});break;case"error":a.A.error(t,{duration:r,style:{...n,backgroundColor:i.error},position:l});break;case"info":(0,a.A)(t,{duration:r,style:{...n,backgroundColor:i.info},position:l});break;case"warning":(0,a.A)(t,{duration:r,style:{...n,backgroundColor:i.warning},position:l});break;default:console.warn("Invalid toast type")}}},9011:function(e,s,t){"use strict";t.d(s,{RequestDetail:function(){return P}});var a=t(7437),r=t(2265),l=t(7648),n=t(9376),i=t(1723),d=t(8736),o=t(8226),c=t(5302),m=t(2252),x=t(4794),u=t(5738),h=t(3774),p=t(340),g=t(2660),y=t(1047),b=t(2735),v=t(8906),f=t(8135),N=t(4755),j=t(5846);let w={PENDING_QUOTE:{label:"Pending Quote",color:"bg-yellow-100 text-yellow-700 border-yellow-200",icon:i.Z,description:"Our team is preparing your detailed quote"},QUOTE_SENT:{label:"Quote Sent",color:"bg-blue-100 text-blue-700 border-blue-200",icon:d.Z,description:"Quote has been sent. Please review and approve"},DEPOSIT_PENDING:{label:"Payment Pending",color:"bg-orange-100 text-orange-700 border-orange-200",icon:o.Z,description:"Waiting for payment"},DEPOSIT_PAID:{label:"Payment Received",color:"bg-green-100 text-green-700 border-green-200",icon:c.Z,description:"Payment received. Processing your order"},INSPECTION_PENDING:{label:"Inspection Pending",color:"bg-yellow-100 text-yellow-700 border-yellow-200",icon:d.Z,description:"Vehicle inspection in progress"},INSPECTION_COMPLETE:{label:"Inspection Complete",color:"bg-blue-100 text-blue-700 border-blue-200",icon:c.Z,description:"Inspection report ready for review"},AWAITING_APPROVAL:{label:"Awaiting Approval",color:"bg-orange-100 text-orange-700 border-orange-200",icon:m.Z,description:"Please review and approve the inspection report"},APPROVED:{label:"Approved",color:"bg-green-100 text-green-700 border-green-200",icon:c.Z,description:"Order approved. Proceeding with purchase"},PURCHASE_IN_PROGRESS:{label:"Purchasing",color:"bg-blue-100 text-blue-700 border-blue-200",icon:x.Z,description:"Purchasing your vehicle from dealer"},PURCHASED:{label:"Purchased",color:"bg-green-100 text-green-700 border-green-200",icon:c.Z,description:"Vehicle purchased successfully"},SHIPPED:{label:"Shipped",color:"bg-blue-100 text-blue-700 border-blue-200",icon:u.Z,description:"Vehicle has been shipped"},IN_TRANSIT:{label:"In Transit",color:"bg-blue-100 text-blue-700 border-blue-200",icon:u.Z,description:"Vehicle is on the way"},ARRIVED_PORT:{label:"Arrived at Port",color:"bg-green-100 text-green-700 border-green-200",icon:h.Z,description:"Vehicle has arrived at destination port"},CUSTOMS_CLEARANCE:{label:"Customs Clearance",color:"bg-yellow-100 text-yellow-700 border-yellow-200",icon:d.Z,description:"Clearing customs formalities"},CLEARED:{label:"Cleared",color:"bg-green-100 text-green-700 border-green-200",icon:c.Z,description:"Customs clearance complete"},DELIVERY_SCHEDULED:{label:"Delivery Scheduled",color:"bg-blue-100 text-blue-700 border-blue-200",icon:p.Z,description:"Delivery date has been scheduled"},DELIVERED:{label:"Delivered",color:"bg-emerald-100 text-emerald-700 border-emerald-200",icon:c.Z,description:"Vehicle successfully delivered"},CANCELLED:{label:"Cancelled",color:"bg-red-100 text-red-700 border-red-200",icon:m.Z,description:"Order has been cancelled"}},_=["BALANCE_PAID","DELIVERED","CANCELLED"];function P(){var e,s,t,x,p,N,P,D,S,k,E,A,I,L,T,O,U,R,Z,F,G,B,V,q,M,H,z,Q,K,W,Y,J,X;let{id:$}=(0,n.useParams)(),ee=(0,n.useRouter)(),[es,et]=(0,r.useState)(!1),{order:ea,isLoading:er,isError:el,refetch:en}=(0,j.Aj)(null!=$?$:"");if(er)return(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"w-16 h-16 border-4 border-emerald-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Loading order details..."})]})});if(!ea)return(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"bg-white rounded-xl p-8 shadow-sm max-w-md text-center",children:[(0,a.jsx)(m.Z,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Order Not Found"}),(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:"We couldn't find the order you're looking for."}),(0,a.jsx)("button",{onClick:()=>ee.push("/marketplace/buyer"),className:"bg-emerald-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-emerald-700",children:"Back to Dashboard"})]})});if(el)return(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"bg-white rounded-xl p-8 shadow-sm max-w-md text-center",children:[(0,a.jsx)(m.Z,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Error Loading Order"}),(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:"There was an error fetching your order details. Please try again."}),(0,a.jsx)("button",{onClick:()=>en(),className:"bg-emerald-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-emerald-700",children:"Retry"})]})});let ei=w[ea.status],ed=(null==ei?void 0:ei.icon)||i.Z,eo=function(e){let s=e.vehicleSnapshot,t=e.vehicle;return(null==s?void 0:s.year)&&(null==s?void 0:s.make)&&(null==s?void 0:s.model)?"".concat(s.year," ").concat(s.make," ").concat(s.model):(null==t?void 0:t.year)&&(null==t?void 0:t.make)&&(null==t?void 0:t.model)?"".concat(t.year," ").concat(t.make," ").concat(t.model):e.requestNumber||"Order #".concat(e.id)}(ea),ec=(null===(z=(V=ea).vehicleSnapshot)||void 0===z?void 0:null===(H=z.apiData)||void 0===H?void 0:null===(M=H.listing)||void 0===M?void 0:null===(q=M.retailListing)||void 0===q?void 0:q.primaryImage)||(null===(Y=V.vehicleSnapshot)||void 0===Y?void 0:null===(W=Y.apiData)||void 0===W?void 0:null===(K=W.listing)||void 0===K?void 0:null===(Q=K.wholesaleListing)||void 0===Q?void 0:Q.primaryImage)||((null===(J=V.vehicleSnapshot)||void 0===J?void 0:J.images)&&V.vehicleSnapshot.images.length>0?V.vehicleSnapshot.images[0]:(null===(X=V.vehicle)||void 0===X?void 0:X.images)&&V.vehicle.images.length>0?V.vehicle.images[0]:"https://images.pexels.com/photos/170811/pexels-photo-170811.jpeg?auto=compress&cs=tinysrgb&w=800"),em=null!==(R=null!==(U=null!==(O=null===(e=ea.paymentBreakdown)||void 0===e?void 0:e.totalUsd)&&void 0!==O?O:ea.totalLandedCostUsd)&&void 0!==U?U:ea.quotedPriceUsd)&&void 0!==R?R:0,ex=null!==(F=null!==(Z=ea.depositAmountUsd)&&void 0!==Z?Z:null===(s=ea.paymentBreakdown)||void 0===s?void 0:s.totalUsedDeposit)&&void 0!==F?F:0,eu=null!==(G=null===(t=ea.payments)||void 0===t?void 0:t.reduce((e,s)=>{var t,a,r;return(null===(t=s.status)||void 0===t?void 0:t.toUpperCase())==="COMPLETED"?e+(null!==(r=null!==(a=s.amountUsd)&&void 0!==a?a:s.amount_usd)&&void 0!==r?r:0):e},0))&&void 0!==G?G:0,eh=Math.max(em-eu,0),ep="DEPOSIT_PAID"===ea.status||_.includes(ea.status),eg=!_.includes(ea.status)&&eh>0;return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)("div",{className:"bg-white border-b border-gray-200",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:(0,a.jsxs)("button",{onClick:()=>ee.push("/marketplace/buyer"),className:"flex items-center gap-2 text-gray-600 hover:text-emerald-600 transition-colors",children:[(0,a.jsx)(g.Z,{className:"w-5 h-5"}),"Back to Dashboard"]})})}),(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,a.jsx)("div",{className:"rounded-xl border-2 p-6 mb-6 ".concat((null==ei?void 0:ei.color)||"bg-gray-100 text-gray-700 border-gray-200"),children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"p-3 bg-white rounded-lg",children:(0,a.jsx)(ed,{className:"w-8 h-8"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold mb-1",children:(null==ei?void 0:ei.label)||ea.status}),(0,a.jsx)("p",{className:"text-sm opacity-90",children:null==ei?void 0:ei.description})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"text-sm font-medium opacity-75",children:"Order Number"}),(0,a.jsx)("p",{className:"text-xl font-bold",children:ea.requestNumber})]})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:[(0,a.jsx)("div",{className:"p-6 border-b border-gray-100",children:(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Vehicle Information"})}),(0,a.jsx)("div",{className:"p-6",children:(0,a.jsxs)("div",{className:"flex flex-col md:flex-row gap-6",children:[(0,a.jsx)("img",{src:ec,alt:eo,className:"w-full md:w-64 h-48 object-cover rounded-lg"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h4",{className:"text-2xl font-bold text-gray-900 mb-2",children:eo}),(null===(x=ea.vehicleSnapshot)||void 0===x?void 0:x.vin)&&(0,a.jsxs)("p",{className:"text-sm text-gray-500 mb-4",children:["VIN: ",ea.vehicleSnapshot.vin]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(null===(p=ea.vehicleSnapshot)||void 0===p?void 0:p.vehicleType)&&(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-500",children:"Type"}),(0,a.jsx)("p",{className:"font-semibold text-gray-900",children:ea.vehicleSnapshot.vehicleType})]}),(null===(N=ea.vehicleSnapshot)||void 0===N?void 0:N.transmission)&&(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-500",children:"Transmission"}),(0,a.jsx)("p",{className:"font-semibold text-gray-900",children:ea.vehicleSnapshot.transmission})]}),(null===(P=ea.vehicleSnapshot)||void 0===P?void 0:P.fuelType)&&(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-500",children:"Fuel Type"}),(0,a.jsx)("p",{className:"font-semibold text-gray-900",children:ea.vehicleSnapshot.fuelType})]}),(null===(E=ea.vehicleSnapshot)||void 0===E?void 0:null===(k=E.apiData)||void 0===k?void 0:null===(S=k.listing)||void 0===S?void 0:null===(D=S.retailListing)||void 0===D?void 0:D.miles)&&(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-500",children:"Mileage"}),(0,a.jsxs)("p",{className:"font-semibold text-gray-900",children:[ea.vehicleSnapshot.apiData.listing.retailListing.miles.toLocaleString()," mi"]})]})]}),(null===(A=ea.vehicleSnapshot)||void 0===A?void 0:A.dealerName)&&(0,a.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-100",children:[(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Dealer"}),(0,a.jsx)("p",{className:"font-medium text-gray-900",children:ea.vehicleSnapshot.dealerName}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:[ea.vehicleSnapshot.dealerCity,", ",ea.vehicleSnapshot.dealerState]})]})]})]})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:[(0,a.jsx)("div",{className:"p-6 border-b border-gray-100",children:(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Shipping & Delivery"})}),(0,a.jsxs)("div",{className:"p-6 space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-start gap-4 p-4 bg-gray-50 rounded-lg",children:[(0,a.jsx)(u.Z,{className:"w-6 h-6 text-emerald-600 mt-1"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"font-semibold text-gray-900",children:"Shipping Method"}),(0,a.jsx)("p",{className:"text-gray-600",children:ea.shippingMethod||"Not specified"})]})]}),(0,a.jsxs)("div",{className:"flex items-start gap-4 p-4 bg-gray-50 rounded-lg",children:[(0,a.jsx)(h.Z,{className:"w-6 h-6 text-emerald-600 mt-1"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"font-semibold text-gray-900",children:"Delivery Address"}),(0,a.jsx)("p",{className:"text-gray-600",children:ea.destinationAddress}),(0,a.jsxs)("p",{className:"text-gray-600",children:[ea.destinationCity,", ",ea.destinationState]}),(0,a.jsx)("p",{className:"text-gray-600",children:ea.destinationCountry})]})]}),ea.estimatedDeliveryDate&&(0,a.jsxs)("div",{className:"flex items-start gap-4 p-4 bg-gray-50 rounded-lg",children:[(0,a.jsx)(y.Z,{className:"w-6 h-6 text-emerald-600 mt-1"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"font-semibold text-gray-900",children:"Estimated Delivery"}),(0,a.jsx)("p",{className:"text-gray-600",children:(0,f.p6)(ea.estimatedDeliveryDate)})]})]}),ea.deliveryInstructions&&(0,a.jsxs)("div",{className:"pt-4 border-t border-gray-100",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"Delivery Instructions"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:ea.deliveryInstructions})]}),ea.customerNotes&&(0,a.jsxs)("div",{className:"pt-4 border-t border-gray-100",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"Your Notes"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:ea.customerNotes})]})]})]}),ea.payments&&ea.payments.length>0&&(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:[(0,a.jsx)("div",{className:"p-6 border-b border-gray-100",children:(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Payment History"})}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:"Date"}),(0,a.jsx)("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:"Type"}),(0,a.jsx)("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:"Amount"}),(0,a.jsx)("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:"Status"}),(0,a.jsx)("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:"Reference"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-gray-100",children:ea.payments.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"px-6 py-4 text-sm text-gray-900",children:(0,f.p6)(e.createdAt||e.created_at)}),(0,a.jsx)("td",{className:"px-6 py-4 text-sm text-gray-900 capitalize",children:e.paymentType||e.payment_type}),(0,a.jsx)("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:(0,f.xG)(e.amountUsd||e.amount_usd)}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsx)("span",{className:"inline-flex px-2 py-1 rounded-full text-xs font-medium ".concat("completed"===e.status?"bg-green-100 text-green-700":"pending"===e.status?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"),children:e.status})}),(0,a.jsx)("td",{className:"px-6 py-4 text-sm text-gray-500",children:e.reference||e.paymentReference||"-"})]},e.id))})]})})]})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Cost Summary"}),(null===(I=ea.paymentBreakdown)||void 0===I?void 0:I.breakdown)?(0,a.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Vehicle Price"}),(0,a.jsx)("span",{className:"font-medium",children:(0,f.xG)(ea.paymentBreakdown.breakdown.vehiclePriceUsd)})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Sourcing Fee"}),(0,a.jsx)("span",{className:"font-medium",children:(0,f.xG)(ea.paymentBreakdown.breakdown.sourcingFee)})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Inspection"}),(0,a.jsx)("span",{className:"font-medium",children:(0,f.xG)(ea.paymentBreakdown.breakdown.prePurchaseInspectionUsd)})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"US Handling Fee"}),(0,a.jsx)("span",{className:"font-medium",children:(0,f.xG)(ea.paymentBreakdown.breakdown.usHandlingFeeUsd)})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Shipping"}),(0,a.jsx)("span",{className:"font-medium",children:(0,f.xG)(ea.paymentBreakdown.breakdown.shippingCostUsd)})]})]}):(0,a.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Base Price"}),(0,a.jsx)("span",{className:"font-medium",children:(0,f.xG)((null===(L=ea.vehicleSnapshot)||void 0===L?void 0:L.priceUsd)||0)})]}),ea.quotedPriceUsd&&(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Quoted Price"}),(0,a.jsx)("span",{className:"font-medium",children:(0,f.xG)(ea.quotedPriceUsd)})]})]}),(0,a.jsxs)("div",{className:"border-t border-gray-100 pt-3 mt-3",children:[(0,a.jsxs)("div",{className:"flex justify-between text-lg mb-2",children:[(0,a.jsx)("span",{className:"font-semibold text-gray-900",children:"Total Cost"}),(0,a.jsx)("span",{className:"font-bold text-gray-900",children:(0,f.xG)(null!==(B=null===(T=ea.paymentBreakdown)||void 0===T?void 0:T.totalUsd)&&void 0!==B?B:0)})]}),ea.totalLandedCostLocal&&ea.localCurrency&&(0,a.jsxs)("p",{className:"text-right text-sm text-gray-600",children:["≈ ",(0,f.xG)(ea.totalLandedCostLocal,"USD"===ea.localCurrency||"NGN"===ea.localCurrency?ea.localCurrency:void 0)]})]}),(0,a.jsxs)("div",{className:"mt-6 space-y-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm mb-1",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Paid"}),(0,a.jsx)("span",{className:"font-medium text-green-600",children:(0,f.xG)(eu)})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-green-600 h-2 rounded-full transition-all",style:{width:"".concat(Math.min(eu/em*100,100),"%")}})})]}),eh>0&&(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Remaining"}),(0,a.jsx)("span",{className:"font-medium text-orange-600",children:(0,f.xG)(eh)})]})]}),0===em&&"PENDING_QUOTE"===ea.status&&(0,a.jsxs)("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,a.jsx)("p",{className:"text-sm text-blue-800 font-medium mb-1",children:"Quote Pending"}),(0,a.jsx)("p",{className:"text-xs text-blue-600",children:"Our team is preparing your detailed quote. Payment options will be available once the quote is ready."})]}),eg&&(0,a.jsx)("div",{className:"mt-6",children:(0,a.jsxs)("button",{onClick:()=>et(!0),className:"w-full bg-emerald-600 text-white py-3 rounded-lg font-medium hover:bg-emerald-700 transition-colors flex items-center justify-center gap-2",children:[(0,a.jsx)(o.Z,{className:"w-5 h-5"}),"Make Payment"]})}),_.includes(ea.status)&&(0,a.jsxs)("div",{className:"mt-6 bg-green-50 border border-green-200 rounded-lg p-4 flex items-center gap-3",children:[(0,a.jsx)(c.Z,{className:"w-5 h-5 text-green-600 flex-shrink-0"}),(0,a.jsx)("p",{className:"text-sm text-green-800 font-medium",children:"Payment complete"})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Order Timeline"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-emerald-100 rounded-full flex items-center justify-center flex-shrink-0",children:(0,a.jsx)(c.Z,{className:"w-4 h-4 text-emerald-600"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"font-medium text-gray-900",children:"Request Submitted"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:(0,f.p6)(ea.createdAt)})]})]}),ea.statusChangedAt&&(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0",children:(0,a.jsx)(ed,{className:"w-4 h-4 text-blue-600"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"font-medium text-gray-900",children:null==ei?void 0:ei.label}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:(0,f.p6)(ea.statusChangedAt)})]})]}),ea.estimatedDeliveryDate&&(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center flex-shrink-0",children:(0,a.jsx)(y.Z,{className:"w-4 h-4 text-gray-600"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"font-medium text-gray-900",children:"Estimated Delivery"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:(0,f.p6)(ea.estimatedDeliveryDate)})]})]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Documents"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("button",{className:"w-full flex items-center justify-between p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(d.Z,{className:"w-5 h-5 text-gray-400"}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Quote Document"})]}),(0,a.jsx)(b.Z,{className:"w-4 h-4 text-gray-400"})]}),(0,a.jsxs)("button",{className:"w-full flex items-center justify-between p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors opacity-50 cursor-not-allowed",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(d.Z,{className:"w-5 h-5 text-gray-400"}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Inspection Report"})]}),(0,a.jsx)("span",{className:"text-xs text-gray-500",children:"Not available"})]})]})]}),(0,a.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-6",children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)(v.Z,{className:"w-6 h-6 text-blue-600 flex-shrink-0 mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-semibold text-blue-900 mb-1",children:"Need Help?"}),(0,a.jsx)("p",{className:"text-sm text-blue-700 mb-3",children:"Our support team is here to assist you with your order."}),(0,a.jsx)(l.default,{href:"/contact",className:"text-sm font-medium text-blue-600 hover:text-blue-700 underline",children:"Contact Support"})]})]})})]})]})]}),es&&(0,a.jsx)(C,{orderId:ea.id,depositAmount:ex,totalCost:em,remainingBalance:eh,depositAlreadyPaid:ep,onClose:()=>et(!1)})]})}function C(e){let{orderId:s,depositAmount:t,totalCost:l,remainingBalance:n,depositAlreadyPaid:i,onClose:d}=e,o=!i&&t>0,c=i&&n>0,[m,x]=(0,r.useState)(()=>o?"deposit":c?"balance":"full"),{mutateAsync:u,isPending:h}=(0,N.E)(),p={deposit:{amount:t,paymentType:"DEPOSIT"},full:{amount:l,paymentType:"FULL_PAYMENT"},balance:{amount:n,paymentType:"FULL_PAYMENT"}}[m],g=async()=>{try{await u({orderId:s,paymentType:p.paymentType,provider:"paystack",callbackUrl:"".concat("https://afrozonauto-frontend-flame.vercel.app/marketplace/buyer/order/payment")})}catch(e){console.error("Payment initialization failed:",e)}};return(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-xl w-full max-w-md shadow-2xl flex flex-col",children:[(0,a.jsx)("div",{className:"p-6 border-b border-gray-100",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h3",{className:"text-xl font-semibold text-gray-900",children:"Make Payment"}),(0,a.jsx)("button",{onClick:d,className:"text-gray-400 hover:text-gray-600",disabled:h,children:"✕"})]})}),(0,a.jsxs)("div",{className:"p-6 space-y-3 flex-1",children:[o&&(0,a.jsx)("button",{onClick:()=>x("deposit"),disabled:h,className:"w-full p-4 border-2 rounded-lg text-left transition-all ".concat("deposit"===m?"border-emerald-500 bg-emerald-50":"border-gray-200 hover:border-gray-300"," ").concat(h?"opacity-50 cursor-not-allowed":""),children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-semibold text-gray-900",children:"Pay Deposit"}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-0.5",children:"Secure your order now, pay the rest later"})]}),(0,a.jsx)("p",{className:"text-lg font-bold text-emerald-600 whitespace-nowrap ml-4",children:(0,f.xG)(t)})]})}),!i&&l>0&&(0,a.jsx)("button",{onClick:()=>x("full"),disabled:h,className:"w-full p-4 border-2 rounded-lg text-left transition-all ".concat("full"===m?"border-emerald-500 bg-emerald-50":"border-gray-200 hover:border-gray-300"," ").concat(h?"opacity-50 cursor-not-allowed":""),children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-semibold text-gray-900",children:"Pay Full Amount"}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-0.5",children:"Complete the entire payment at once"})]}),(0,a.jsx)("p",{className:"text-lg font-bold text-emerald-600 whitespace-nowrap ml-4",children:(0,f.xG)(l)})]})}),c&&(0,a.jsx)("button",{onClick:()=>x("balance"),disabled:h,className:"w-full p-4 border-2 rounded-lg text-left transition-all border-emerald-500 bg-emerald-50 ".concat(h?"opacity-50 cursor-not-allowed":""),children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-semibold text-gray-900",children:"Pay Remaining Balance"}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-0.5",children:"Complete your outstanding balance"})]}),(0,a.jsx)("p",{className:"text-lg font-bold text-emerald-600 whitespace-nowrap ml-4",children:(0,f.xG)(n)})]})})]}),(0,a.jsx)("div",{className:"p-6 pt-0",children:(0,a.jsx)("button",{onClick:g,disabled:h||0===p.amount,className:"w-full px-4 py-3 bg-emerald-600 text-white rounded-lg font-medium hover:bg-emerald-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:h?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Processing..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(v.Z,{className:"w-5 h-5"}),"Pay ",(0,f.xG)(p.amount)]})})})]})})}}},function(e){e.O(0,[451,605,21,464,799,713,828,971,117,744],function(){return e(e.s=8312)}),_N_E=e.O()}]);